(this.webpackJsonpabobestellung=this.webpackJsonpabobestellung||[]).push([[0],{174:function(e,t,s){},176:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s.n(a),r=s(25),i=s.n(r),l=s(29),c=s(18),d=s(19),o=s(11),h=s(21),b=s(20),j=s(33),u=s(94),p=s(85),O=s(92),m=s(13),g=s.p+"static/media/logo.e9589ad7.png",x=s.p+"static/media/avatar.9771c045.jpg",v=s(2),y=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){var e=this.props,t=e.isLoggedIn,s=e.userName;return Object(v.jsxs)(u.a,{collapseOnSelect:!0,expand:"md",bg:"light",variant:"light",sticky:"top",children:[Object(v.jsx)(l.b,{to:"/",children:Object(v.jsxs)(u.a.Brand,{children:[Object(v.jsx)("img",{alt:"logo",src:g,width:"55",className:"d-inline-block align-top",style:{marginRight:"10px"}})," ","Die Zeitung"]})}),Object(v.jsx)(u.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(v.jsxs)(u.a.Collapse,{id:"responsive-navbar-nav",children:[Object(v.jsx)(p.a,{className:"mr-auto",children:Object(v.jsx)(l.b,{to:"/konfigurator",children:"Produktkonfigurator"})}),Object(v.jsx)(p.a,{children:t?Object(v.jsxs)(O.a,{alignRight:!0,navbar:!0,children:[Object(v.jsxs)(O.a.Toggle,{className:"headerProfileBtn",children:[Object(v.jsx)("div",{className:"headerName",children:s}),Object(v.jsx)("img",{alt:"Avatar",src:x,className:"d-inline-block align-top avatar"})," "]}),Object(v.jsxs)(O.a.Menu,{children:[Object(v.jsx)(l.b,{className:"headerLink, dropdown-item",to:"/benutzerprofil",children:"Benutzerprofil"}),Object(v.jsx)(l.b,{className:"headerLink, dropdown-item",to:"/abonnements",children:"Abonnements"}),Object(v.jsx)(O.a.Divider,{}),Object(v.jsx)(l.b,{className:"headerLink, dropdown-item",to:"/abmelden",children:"Abmelden"})]})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(l.b,{to:"/anmelden",children:Object(v.jsx)(m.a,{variant:"outline-primary",style:{marginRight:"10px"},children:"Anmelden"})}),Object(v.jsx)(l.b,{to:"/registrieren",children:Object(v.jsx)(m.a,{variant:"outline-secondary",children:"Registrieren"})})]})})]})]})}}]),s}(a.Component),f=s(27),A=s(110),C=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){var e=this,t=this.props,s=t.isLoggedIn,a=t.user;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"landingPageContainer",children:Object(v.jsxs)(f.a,{children:[Object(v.jsx)(A.a,{alt:"logo",src:g,width:"80%",className:"d-inline-block align-top",style:{marginRight:"10%",marginLeft:"10%"},fluid:!0})," "]})}),Object(v.jsx)("div",{className:"landingPageContainer",children:Object(v.jsxs)(f.a,{children:[s?Object(v.jsxs)("h1",{children:["Herzlich Willkommen zur\xfcck ",a.firstname+" "+a.lastname,"!"]}):Object(v.jsx)("h1",{children:"Herzlich Willkommen!"}),Object(v.jsxs)("p",{children:["Hier bei deiner Zeitung vor Ort!",Object(v.jsx)("br",{}),"Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet."]})]})}),s?Object(v.jsx)("div",{className:"landingPageContainer",children:Object(v.jsxs)(f.a,{children:[Object(v.jsx)("h1",{children:"Was m\xf6chten Sie heute tun?"}),Object(v.jsx)("p",{children:"Ihre Daten k\xf6nnen Sie im Benutzerprofil einsehen und \xe4ndern:"}),Object(v.jsx)("p",{children:Object(v.jsx)(m.a,{variant:"outline-success",onClick:function(){e.props.history.push("/benutzerprofil")},children:"Zum Benutzerprofil"})}),Object(v.jsxs)("p",{children:["Einen \xdcberblick \xfcber Ihre abgeschlossenen Abonnements finden Sie hier.",Object(v.jsx)("br",{}),"Ebenfalls k\xf6nnen Sie ganz gem\xfctlich ein Abonnement \xfcber das Abonnement Menu stornieren."]}),Object(v.jsx)("p",{children:Object(v.jsx)(m.a,{variant:"outline-warning",onClick:function(){e.props.history.push("/abonnements")},children:"Zu Ihren Abonnements"})})]})}):"",Object(v.jsx)("div",{className:"landingPageContainer",children:Object(v.jsxs)(f.a,{children:[Object(v.jsx)("h1",{children:"Schlie\xdfe noch heute ein Abo ab!"}),Object(v.jsx)("p",{children:"In unserem individuellen Abokonfigurator finden Sie bestimmt das wonach Sie suchen."}),Object(v.jsx)("p",{children:Object(v.jsx)(m.a,{variant:"outline-primary",onClick:function(){e.props.history.push("/konfigurator")},children:"Konfigurator starten"})})]})}),Object(v.jsx)("div",{className:"landingPageContainer",children:Object(v.jsxs)(f.a,{children:[Object(v.jsx)("h1",{children:"Jetzt auch online!"}),Object(v.jsx)("p",{children:"Seit neustem gibt es unsere Ausgabe auch ganz bequem online auf das Ger\xe4t Ihrer Wahl. Konfigurieren Sie Ihr ganz pers\xf6nliches Abonnement jetzt!"}),Object(v.jsx)("p",{children:Object(v.jsx)(m.a,{variant:"outline-primary",onClick:function(){e.props.history.push("/konfigurator")},children:"Konfigurator starten"})})]})})]})}}]),s}(a.Component),k=Object(j.g)(C),S=s(5),D=s(15),I=s(93),w=s(87),B=s(52);function N(e){return new Promise((function(t,s){V[e.id]=e,t(!0)}))}function M(e){return new Promise((function(t,s){setTimeout((function(){return t(Object.values(V).find((function(t){return t.email===e})))}),1500)}))}function U(e){return new Promise((function(t,s){delete V[e],t(!0)}))}function P(e){return new Promise((function(t,s){e.id=Object.values(L).length+1,setTimeout((function(){L=Object(B.a)(Object(B.a)({},L),{},Object(w.a)({},e.id,e)),t(!0)}),100)}))}function z(e){return new Promise((function(t,s){L[e.id]=e,t(!0)}))}function T(e){return new Promise((function(t,s){setTimeout((function(){var s=Object.values(L).filter((function(t){return t.cid===e}));t(s)}),950)}))}var L={1:{id:1,cid:1,created:"10.05.2021",startabodate:"01.05.2021",endabodate:"01.05.2022",dataprivacyaccepted:!0,abotype:"Printed",deliverymethod:"Post",paymenttype:"Credit Card",payment:"Annual",subscriptiontype:"Daily",calculatedprice:12.99,calculatedyearprice:130,localpaperversions:1}},V={1:{id:1,firstname:"Matthias",lastname:"Gutbrod",companyname:"",email:"Matthias.Gutbrod@Reutlingen-University.de",password:"daffdb966b609c1867d8873cf7c000e0edb0756d5830583b6ec6c8cfd6c28fd7f3dfa467ffd96f0c193b5747d48b97ee87e5ce4ec3fd5cee861a19d0a2a5eff5",phone:"",deliveryAddress:{street1:"Alteburgstra\xdfe 150",street2:"",city:"Reutlingen",plz:"72762"},billingAddress:{street1:"Alteburgstra\xdfe 10",street2:"",city:"Reutlingen",plz:"72762"}}};function F(e){return Promise.all([M(e)]).then((function(e){return{customer:e}}))}var G=s(28),E=s(36),H=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).onChangeDifferentBillingAddress=a.onChangeDifferentBillingAddress.bind(Object(o.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(o.a)(a)),a.toggleDuplicateEmailAddress=a.toggleDuplicateEmailAddress.bind(Object(o.a)(a)),a.state={differentBillingAddress:!1,validated:!1,signIn:!1,duplicateEmailAddress:!1},a}return Object(d.a)(s,[{key:"onChangeDifferentBillingAddress",value:function(){this.setState((function(e){return{differentBillingAddress:!e.differentBillingAddress}}))}},{key:"handleSubmit",value:function(e){var t=this,s=e.currentTarget;if(!1===s.checkValidity())e.stopPropagation();else{console.log("Erstelle Kunde");var a={id:0,titleAddress:s[1].value,firstname:s[2].value,lastname:s[3].value,companyname:s[0].value,email:s[8].checked?s[13].value:s[9].value,password:s[8].checked?s[15].value:s[11].value,phone:s[8].checked?s[14].value:s[10].value,deliveryAddress:{city:s[5].value,plz:s[6].value,street:s[4].value,state:s[7].value},billingAddress:{city:s[8].checked?s[10].value:s[5].value,plz:s[8].checked?s[11].value:s[6].value,street:s[8].checked?s[9].value:s[4].value,state:s[8].checked?s[12].value:s[7].value}};(function(e){return Promise.all([(t=e,new Promise((function(e,s){t.id=Object.values(V).length+1,Object.values(V).find((function(e){return e.email===t.email}))?e(!1):setTimeout((function(){V=Object(B.a)(Object(B.a)({},V),{},Object(w.a)({},t.id,t)),e(!0)}),100)})))]).then((function(e){return{success:e}}));var t})(a).then((function(e){console.log("Kunde erstellt"),e.success[0]?(t.setState({signIn:!1}),t.props.handleLogIn(a)):t.setState({duplicateEmailAddress:!0,signIn:!1})}))}e.preventDefault(),this.setState({validated:!0})}},{key:"toggleDuplicateEmailAddress",value:function(){this.setState({duplicateEmailAddress:!1})}},{key:"render",value:function(){var e=this.state,t=e.differentBillingAddress,s=e.validated,a=e.signIn,n=e.duplicateEmailAddress,r=this.props.user;return Object(v.jsxs)("div",{className:"registrieren",children:[Object(v.jsx)("h1",{className:"registrierenHeadline",children:"Registrieren"}),Object(v.jsxs)(S.a,{noValidate:!0,validated:s,onSubmit:this.handleSubmit,children:[Object(v.jsx)(S.a.Group,{controlId:"formCompanyName",children:Object(v.jsx)(S.a.Control,{disabled:a,name:"companyName",placeholder:"Firmenname"})}),Object(v.jsx)(S.a.Group,{controlId:"formAnrede",children:Object(v.jsxs)(S.a.Control,{disabled:a,required:!0,as:"select",defaultValue:"Herr",children:[Object(v.jsx)("option",{children:"Herr"}),Object(v.jsx)("option",{children:"Frau"})]})}),Object(v.jsxs)(S.a.Row,{children:[Object(v.jsxs)(S.a.Group,{as:D.a,controlId:"formFirstName",children:[Object(v.jsx)(S.a.Control,{disabled:a,required:!0,name:"firstName",placeholder:"Vorname"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihren Vornamen ein."})]}),Object(v.jsxs)(S.a.Group,{as:D.a,controlId:"formLastName",children:[Object(v.jsx)(S.a.Control,{disabled:a,required:!0,name:"lastName",placeholder:"Nachname"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihren Nachnamen ein."})]})]}),t?Object(v.jsx)("p",{children:"Lieferdresse"}):Object(v.jsx)("p",{children:"Adresse"}),Object(v.jsxs)(S.a.Group,{controlId:"formGridAddress1",children:[Object(v.jsx)(S.a.Control,{disabled:a,required:!0,defaultValue:r.deliveryAddress.street,placeholder:"Stra\xdfe"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Stra\xdfe ein."})]}),Object(v.jsxs)(S.a.Row,{children:[Object(v.jsxs)(S.a.Group,{as:D.a,controlId:"formGridCity1",children:[Object(v.jsx)(S.a.Control,{disabled:a,required:!0,name:"city",defaultValue:r.deliveryAddress.city,placeholder:"Stadt"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Stadt ein."})]}),Object(v.jsxs)(S.a.Group,{as:D.a,controlId:"formGridZip1",children:[Object(v.jsx)(S.a.Control,{disabled:a,required:!0,defaultValue:r.deliveryAddress.plz,type:"number",name:"zip",placeholder:"PLZ"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Postleitzahl ein."})]})]}),Object(v.jsx)(S.a.Group,{controlId:"formGridState1",children:Object(v.jsxs)(S.a.Control,{disabled:a,required:!0,name:"state",as:"select",defaultValue:""!==r.deliveryAddress.state?r.deliveryAddress.state:"Deutschland",children:[Object(v.jsx)("option",{children:"Deutschland"}),Object(v.jsx)("option",{children:"\xd6sterreich"}),Object(v.jsx)("option",{children:"Schweiz"}),Object(v.jsx)("option",{children:"Frankreich"})]})}),Object(v.jsx)(S.a.Group,{children:Object(v.jsx)(S.a.Check,{disabled:a,onChange:this.onChangeDifferentBillingAddress,label:"Abweichende Rechnungsadresse"})}),t?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("p",{children:"Rechnungsdresse"}),Object(v.jsxs)(S.a.Group,{controlId:"formGridAddress2",children:[Object(v.jsx)(S.a.Control,{disabled:a,required:!0,placeholder:"Stra\xdfe"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Stra\xdfe ein."})]}),Object(v.jsxs)(S.a.Row,{children:[Object(v.jsxs)(S.a.Group,{as:D.a,controlId:"formGridCity2",children:[Object(v.jsx)(S.a.Control,{disabled:a,required:!0,name:"city",placeholder:"Stadt"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Stadt ein."})]}),Object(v.jsxs)(S.a.Group,{as:D.a,controlId:"formGridZip2",children:[Object(v.jsx)(S.a.Control,{disabled:a,required:!0,type:"number",name:"zip",placeholder:"PLZ"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Postleitzahl ein."})]})]}),Object(v.jsx)(S.a.Group,{controlId:"formGridState2",children:Object(v.jsxs)(S.a.Control,{disabled:a,required:!0,name:"state",as:"select",defaultValue:"Deutschland",children:[Object(v.jsx)("option",{children:"Deutschland"}),Object(v.jsx)("option",{children:"\xd6sterreich"}),Object(v.jsx)("option",{children:"Schweiz"}),Object(v.jsx)("option",{children:"Frankreich"})]})})]}):"",Object(v.jsx)("br",{}),Object(v.jsxs)(S.a.Group,{controlId:"formBasicEmail",children:[Object(v.jsx)(S.a.Control,{disabled:a,required:!0,type:"email",placeholder:"E-Mail-Adresse"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre E-Mail-Adresse ein."})]}),Object(v.jsxs)(S.a.Group,{controlId:"formBasicPhone",children:[Object(v.jsx)(S.a.Control,{disabled:a,required:!0,type:"number",placeholder:"Telefonnummer"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Telefonnummer ein."})]}),Object(v.jsxs)(S.a.Group,{controlId:"formBasicPassword",children:[Object(v.jsx)(S.a.Control,{disabled:a,required:!0,type:"password",placeholder:"Passwort"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihr Passwort ein."})]}),Object(v.jsxs)(G.a,{className:"toastErrorBorder",show:n,onClose:this.toggleDuplicateEmailAddress,children:[Object(v.jsx)(G.a.Header,{className:"toastError",children:Object(v.jsx)("strong",{className:"mr-auto",children:"Fehler"})}),Object(v.jsxs)(G.a.Body,{children:["Die eingegebene E-Mail-Adresse ist bereits vorhanden. M\xf6chten Sie sich ",Object(v.jsx)(l.b,{to:"/anmelden",children:"anmelden"}),"?"]})]}),Object(v.jsx)("br",{}),Object(v.jsx)(m.a,{variant:"primary",type:"submit",style:{width:"100%"},children:a?Object(v.jsx)(E.a,{as:"span",animation:"border",size:"md",role:"status","aria-hidden":"true"}):"Registrieren"}),Object(v.jsxs)(S.a.Text,{muted:!0,style:{textAlign:"right"},children:["Sie haben bereits einen User? ",Object(v.jsx)(l.b,{to:"/anmelden",children:"Anmelden"})]})]})]})}}]),s}(a.Component),W=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){var e=this.props,t=e.validated,s=e.handleSubmit,a=e.logIn,n=e.userMissing,r=e.passwordWrong,i=e.toggleUserMissing,c=e.togglePasswordWrong;return Object(v.jsxs)(S.a,{noValidate:!0,validated:t,onSubmit:s,children:[Object(v.jsxs)(S.a.Group,{controlId:"formBasicEmail",children:[Object(v.jsx)(S.a.Control,{disabled:a,required:!0,type:"email",placeholder:"E-Mail-Adresse"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre E-Mail-Adresse ein."})]}),Object(v.jsxs)(S.a.Group,{controlId:"formBasicPassword",children:[Object(v.jsx)(S.a.Control,{disabled:a,required:!0,type:"password",placeholder:"Passwort"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihr Passwort ein."})]}),Object(v.jsxs)(G.a,{className:"toastErrorBorder, loginToast",show:n,onClose:i,children:[Object(v.jsx)(G.a.Header,{className:"toastError",children:Object(v.jsx)("strong",{className:"mr-auto",children:"Fehler"})}),Object(v.jsxs)(G.a.Body,{children:["Die eingegebene E-Mail-Adresse ist nicht vorhanden. Wollen Sie sich ",Object(v.jsx)(l.b,{to:"/registrieren",children:"registrieren"}),"?"]})]}),Object(v.jsxs)(G.a,{className:"toastErrorBorder, loginToast",show:r,onClose:c,children:[Object(v.jsx)(G.a.Header,{className:"toastError",children:Object(v.jsx)("strong",{className:"mr-auto",children:"Fehler"})}),Object(v.jsx)(G.a.Body,{children:"Das eingegebe Passwort ist falsch. Bitte versuchen Sie es erneut!"})]}),Object(v.jsx)(m.a,{variant:"primary",type:"submit",style:{width:"100%"},children:a?Object(v.jsx)(E.a,{as:"span",animation:"border",size:"md",role:"status","aria-hidden":"true"}):"Anmelden"}),Object(v.jsxs)(S.a.Text,{muted:!0,style:{textAlign:"right"},children:["Sie haben noch keinen User? ",Object(v.jsx)(l.b,{to:"/registrieren",children:"Registrieren"})]})]})}}]),s}(a.Component),R=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).handleSubmit=a.handleSubmit.bind(Object(o.a)(a)),a.toggleUserMissing=a.toggleUserMissing.bind(Object(o.a)(a)),a.togglePasswordWrong=a.togglePasswordWrong.bind(Object(o.a)(a)),a.state={validated:!1,logIn:!1,userMissing:!1,passwordWrong:!1},a}return Object(d.a)(s,[{key:"handleSubmit",value:function(e){var t=this,s=e.currentTarget;!1===s.checkValidity()?e.stopPropagation():(this.setState({logIn:!0}),F(s[0].value).then((function(e){void 0===e.customer[0]?t.setState({logIn:!1,userMissing:!0}):e.customer[0].password!==s[1].value?t.setState({logIn:!1,passwordWrong:!0}):t.props.handleLogIn(e.customer[0])}))),e.preventDefault(),this.setState({validated:!0})}},{key:"toggleUserMissing",value:function(){this.setState({userMissing:!1})}},{key:"togglePasswordWrong",value:function(){this.setState({passwordWrong:!1})}},{key:"render",value:function(){var e=this.state,t=e.validated,s=e.logIn,a=e.userMissing,n=e.passwordWrong;return Object(v.jsxs)("div",{className:"registrieren",children:[Object(v.jsx)("h1",{className:"registrierenHeadline",children:"Anmelden"}),Object(v.jsx)(W,{validated:t,handleSubmit:this.handleSubmit,logIn:s,passwordWrong:n,togglePasswordWrong:this.togglePasswordWrong,toggleUserMissing:this.toggleUserMissing,userMissing:a})]})}}]),s}(a.Component),q=s(44),Z=s(17),K=s(89),Y=s(14),J=s.p+"static/media/newspaper.12fc473d.jpg",Q=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).handleLogIn=a.handleLogIn.bind(Object(o.a)(a)),a.handleClose=a.handleClose.bind(Object(o.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(o.a)(a)),a.toggleUserMissing=a.toggleUserMissing.bind(Object(o.a)(a)),a.togglePasswordWrong=a.togglePasswordWrong.bind(Object(o.a)(a)),a.onChangeAddress=a.onChangeAddress.bind(Object(o.a)(a)),a.startConfig=a.startConfig.bind(Object(o.a)(a)),a.formAddress=n.a.createRef(),a.state={showModal:!1,validated:!1,logIn:!1,userMissing:!1,passwordWrong:!1,validatedAddress:!1},a}return Object(d.a)(s,[{key:"handleLogIn",value:function(){this.setState({showModal:!0})}},{key:"handleClose",value:function(){this.setState({showModal:!1})}},{key:"handleSubmit",value:function(e){var t=this,s=e.currentTarget;e.preventDefault(),!1===s.checkValidity()?e.stopPropagation():(this.setState({logIn:!0}),F(s[0].value).then((function(e){void 0===e.customer[0]?t.setState({logIn:!1,userMissing:!0}):e.customer[0].password!==s[1].value?t.setState({logIn:!1,passwordWrong:!0}):(t.props.loginUser(e.customer[0]),t.setState({login:!1,showModal:!1}))}))),this.setState({validated:!0})}},{key:"toggleUserMissing",value:function(){this.setState({userMissing:!1})}},{key:"togglePasswordWrong",value:function(){this.setState({passwordWrong:!1})}},{key:"onChangeAddress",value:function(e){var t=e.target.name,s=e.target.value;this.props.changeDeliveryAddress(t,s)}},{key:"startConfig",value:function(e){var t=this.formAddress.current;e.preventDefault(),!1===t.checkValidity()?e.stopPropagation():this.props.history.push("/konfigurator/detail"),this.setState({validatedAddress:!0})}},{key:"render",value:function(){var e=this.state,t=e.showModal,s=e.validated,a=e.logIn,n=e.userMissing,r=e.passwordWrong,i=e.validatedAddress,l=this.props,c=l.user,d=l.isLoggedIn;return Object(v.jsxs)(f.a,{style:{paddingTop:"1.5rem"},children:[Object(v.jsxs)(q.a,{children:[Object(v.jsx)(q.a.Img,{variant:"top",className:"productImage",src:J}),Object(v.jsxs)(q.a.Body,{children:[Object(v.jsx)(q.a.Title,{style:{fontSize:"2rem"},children:"Die Zeitung - Gedruckt"}),Object(v.jsxs)(q.a.Text,{children:["Wer sich intelligent informieren m\xf6chte, liest ",Object(v.jsx)("em",{children:"die Zeitung"}),": gr\xfcndlich recherchierte Fakten, pr\xe4zise Analysen, klug geschriebene Kommentare. Eine Zeitung, gemacht von erstklassigen Journalisten f\xfcr Leser mit h\xf6chsten Anspr\xfcchen."]})]}),Object(v.jsxs)(Z.a,{className:"list-group-flush",children:[Object(v.jsxs)(K.a,{children:["Geben Sie unten Ihre Adresse an und w\xe4hlen Sie anschlie\xdfend folgende Optionen in unserem Konfigurator:",Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{children:"Ausgabe"}),Object(v.jsx)("li",{children:"Art des Abonnements"}),Object(v.jsx)("li",{children:"Zahlungsart und Zahlungszeitpunkt"}),Object(v.jsx)("li",{children:"Start-Datum Ihres Abonnements"})]})]}),Object(v.jsx)(K.a,{children:Object(v.jsxs)(S.a,{noValidate:!0,validated:i,ref:this.formAddress,children:[Object(v.jsx)("h4",{className:"deliveryAddress",children:"Lieferadresse"}),d?Object(v.jsxs)(m.a,{className:"headerProfileBtn deliveryLoginBtn",children:[Object(v.jsx)("img",{alt:"Avatar",src:x,className:"d-inline-block align-top avatar deliveryAvatar"})," ",Object(v.jsx)("div",{className:"headerName",children:c.email})]}):Object(v.jsxs)(m.a,{className:"headerProfileBtn deliveryLoginBtn",onClick:this.handleLogIn,children:[Object(v.jsx)("img",{alt:"Avatar",src:x,className:"d-inline-block align-top avatar deliveryAvatar"})," ",Object(v.jsx)("div",{className:"headerName",children:"Mit Account fortfahren"})]}),Object(v.jsxs)(S.a.Group,{controlId:"formGridAddress",children:[Object(v.jsx)(S.a.Control,{name:"street",required:!0,placeholder:"Stra\xdfe",value:c.deliveryAddress.street,onChange:this.onChangeAddress}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Stra\xdfe ein."})]}),Object(v.jsxs)(S.a.Row,{children:[Object(v.jsxs)(S.a.Group,{as:D.a,controlId:"formGridCity",children:[Object(v.jsx)(S.a.Control,{required:!0,name:"city",placeholder:"Stadt",value:c.deliveryAddress.city,onChange:this.onChangeAddress}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Stadt ein."})]}),Object(v.jsxs)(S.a.Group,{as:D.a,controlId:"formGridZip",children:[Object(v.jsx)(S.a.Control,{required:!0,type:"number",name:"plz",placeholder:"PLZ",value:c.deliveryAddress.plz,onChange:this.onChangeAddress}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Postleitzahl ein."})]})]}),Object(v.jsx)(S.a.Group,{controlId:"formGridState",children:Object(v.jsxs)(S.a.Control,{required:!0,name:"state",as:"select",value:c.deliveryAddress.state,onChange:this.onChangeAddress,children:[Object(v.jsx)("option",{children:"Deutschland"}),Object(v.jsx)("option",{children:"\xd6sterreich"}),Object(v.jsx)("option",{children:"Schweiz"}),Object(v.jsx)("option",{children:"Frankreich"})]})})]})})]}),Object(v.jsx)(q.a.Footer,{children:Object(v.jsx)(q.a,{children:Object(v.jsxs)(q.a.Body,{children:[Object(v.jsx)("div",{className:"priceTag",children:Object(v.jsx)("div",{className:"priceTagValue",children:"5\u20ac*"})}),Object(v.jsxs)("div",{className:"priceTagText",children:["Die Zeitung - Gedruckt",Object(v.jsx)(m.a,{onClick:this.startConfig,style:{float:"right"},children:"Konfigurieren"})]}),Object(v.jsx)("p",{className:"priceTagMuted",children:"*Grundpreis"})]})})})]}),Object(v.jsxs)(Y.a,{show:t,onHide:this.handleClose,backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(v.jsx)(Y.a.Header,{closeButton:!0,children:Object(v.jsx)(Y.a.Title,{children:"Anmelden"})}),Object(v.jsx)(Y.a.Body,{children:Object(v.jsx)(W,{validated:s,handleSubmit:this.handleSubmit,logIn:a,passwordWrong:r,togglePasswordWrong:this.togglePasswordWrong,toggleUserMissing:this.toggleUserMissing,userMissing:n})}),Object(v.jsx)(Y.a.Footer,{children:Object(v.jsx)(m.a,{variant:"secondary",onClick:this.handleClose,children:"Abbrechen"})})]})]})}}]),s}(a.Component),X=Object(j.g)(Q),$=s(204),_=s(208),ee=s(218),te=s(142),se=s(143),ae=s(38),ne=s(214),re=s(123),ie=s(210),le=s(137),ce=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){var e=this,t=this.props,s=t.edition,a=t.cssCardClass,n=t.title,r=t.aboWeekend,i=t.currentPriceID,l=t.period,c=t.otherCountry,d=t.otherCountryDelivery,o=t.checkedYearly;return Object(v.jsxs)(q.a,{className:"detailVersion "+a,children:[Object(v.jsxs)(q.a.Header,{className:"detailVersionHeader",children:[n.toUpperCase(),Object(v.jsx)("br",{}),Object(v.jsxs)("span",{children:[Object(v.jsx)("span",{className:"detailVersionHeaderValue",children:(r?Math.round(.6*s.price[i]):s.price[i])+this.props.getDistanceSupplement()}),"\u20ac/",l]})]}),Object(v.jsxs)(Z.a,{variant:"flush",style:{borderBottom:"1px solid rgba(0,0,0,.125)"},children:[Object(v.jsx)(Z.a.Item,{className:"detailVersionItem",children:"Globaler Teil inkl. ausgew\xe4hlter Lokalteil"}),s.isAvailable?Object(v.jsx)(Z.a.Item,{className:"detailVersionItem",children:"Geliefert durch Austr\xe4ger"}):Object(v.jsx)(Z.a.Item,{className:"detailVersionItem",children:"Wird mit DHL versendet"}),s.isAvailable?Object(v.jsxs)(Z.a.Item,{className:"detailVersionItem",children:["inkl. ",this.props.getDistanceSupplement(),"\u20ac Entfernungspauschale"]}):Object(v.jsxs)(Z.a.Item,{className:"detailVersionItem",children:["inkl. ",c?d:0===this.props.getDistanceSupplement()?"20":2*this.props.getDistanceSupplement(),"\u20ac Versandkosten ",c?"(International)":""]}),Object(v.jsx)(Z.a.Item,{className:"detailVersionItem",children:r?"Wochnendausgabe (Fr+Sa)":"T\xe4gliche Ausgabe"}),Object(v.jsxs)(Z.a.Item,{className:"detailVersionItem",children:[o?"J\xe4hrliche ":"Monatliche "," Zahlung"]})]}),Object(v.jsx)(q.a.Footer,{className:"detailVersionFooter",children:Object(v.jsx)(m.a,{onClick:function(){return e.props.handleVariantSelect(s.id)},children:"Ausw\xe4hlen"})})]})}}]),s}(a.Component),de=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).handleYearlyChange=a.handleYearlyChange.bind(Object(o.a)(a)),a.handleAboChange=a.handleAboChange.bind(Object(o.a)(a)),a.handleCheckout=a.handleCheckout.bind(Object(o.a)(a)),a.handleClose=a.handleClose.bind(Object(o.a)(a)),a.handleVariantSelect=a.handleVariantSelect.bind(Object(o.a)(a)),a.getDistanceSupplement=a.getDistanceSupplement.bind(Object(o.a)(a)),a.state={isLoading:!0,checkedYearly:!0,aboWeekend:!1,period:"J\xe4hrlich",price:{},currentPriceID:0,calcDistance:0,selectedAbo:"stadt",showModal:!1,otherCountry:!1,otherCountryDelivery:50,cssEdition:{sport:"",stadt:"recommended",land:""}},a}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var e=this;if("Deutschland"===this.props.user.deliveryAddress.state){var t={"Access-Control-Allow-Origin":"*"};fetch("http://localhost:4500/functions/getDistanceFromCompanyToDestinationPlz/".concat(this.props.user.deliveryAddress.plz),{method:"GET",header:t}).then((function(e){return e.json()})).then((function(s){var a=s.distance;console.log("Got Distance "+a),fetch("http://localhost:4500/functions/getLocalVersionsForPlz/".concat(e.props.user.deliveryAddress.plz),{method:"GET",header:t}).then((function(e){return e.json()})).then((function(t){console.log("Got "+Object.values(t).length+" LocalVersions");var s=!1,n=!1,r=!1;Object.values(t).forEach((function(e){switch(e.name){case"Stadtausgabe":s=!0;break;case"Sportversion":n=!0;break;case"Landkreisinfos":r=!0}})),e.setState({calcDistance:a,isLoading:!1,price:{sport:{id:2,isAvailable:n,price:[120,12]},stadt:{id:1,isAvailable:s,price:[110,11]},land:{id:3,isAvailable:r,price:[130,13]}}})}))}))}else this.setState({calcDistance:0,isLoading:!1,otherCountry:!0,price:{sport:{id:2,isAvailable:!1,price:[120+this.state.otherCountryDelivery,12+this.state.otherCountryDelivery]},stadt:{id:1,isAvailable:!1,price:[110+this.state.otherCountryDelivery,11+this.state.otherCountryDelivery]},land:{id:3,isAvailable:!1,price:[130+this.state.otherCountryDelivery,13+this.state.otherCountryDelivery]}}})}},{key:"handleYearlyChange",value:function(){this.state.checkedYearly?this.setState((function(e){return{checkedYearly:!e.checkedYearly,period:"Monatlich",currentPriceID:1}})):this.setState((function(e){return{checkedYearly:!e.checkedYearly,period:"J\xe4hrlich",currentPriceID:0}}))}},{key:"handleAboChange",value:function(){this.setState((function(e){return{aboWeekend:!e.aboWeekend}}))}},{key:"handleVariantSelect",value:function(e){switch(e){case 2:this.setState({selectedAbo:"sport",cssEdition:{sport:"recommended",stadt:"",land:""}});break;case 1:this.setState({selectedAbo:"stadt",cssEdition:{sport:"",stadt:"recommended",land:""}});break;case 3:this.setState({selectedAbo:"land",cssEdition:{sport:"",stadt:"",land:"recommended"}})}}},{key:"handleCheckout",value:function(){var e=new Date;if(e.setDate(e.getDate()+2),this.props.startDate.setHours(0,0,0,0)>=e.setHours(0,0,0,0)){var t={id:0,cid:this.props.isLoggedIn?this.props.user.id:0,created:(new Date).toLocaleString().split(",")[0],startabodate:this.props.startDate.toLocaleString().split(",")[0],endabodate:"",dataprivacyaccepted:!1,abotype:"Printed",deliverymethod:this.state.price[this.state.selectedAbo].isAvailable?"Delivery man":"Post",paymenttype:"",payment:this.state.checkedYearly?"Annual":"Monthly",subscriptiontype:this.state.aboWeekend?"Weekend":"Daily",calculatedprice:(this.state.aboWeekend?Math.round(.6*this.state.price[this.state.selectedAbo].price[1]):this.state.price[this.state.selectedAbo].price[1])+this.getDistanceSupplement(),calculatedyearprice:(this.state.aboWeekend?Math.round(.6*this.state.price[this.state.selectedAbo].price[0]):this.state.price[this.state.selectedAbo].price[0])+this.getDistanceSupplement(),localpaperversions:this.state.price[this.state.selectedAbo].id,hintDeliveryMan:this.state.price[this.state.selectedAbo].isAvailable?this.props.hint:""};this.props.onAboCreate(t),this.props.isLoggedIn?this.props.history.push("/konfigurator/checkout"):this.setState({showModal:!0})}}},{key:"handleClose",value:function(){this.setState({showModal:!1})}},{key:"getDistanceSupplement",value:function(){var e=this.state.calcDistance;return 0===e?0:e>0&&e<=10?5:e>10&&e<=30?10:e>30?15:void 0}},{key:"render",value:function(){var e=this.state,t=e.checkedYearly,s=e.period,a=e.price,n=e.currentPriceID,r=e.aboWeekend,i=e.isLoading,c=e.selectedAbo,d=e.showModal,o=e.otherCountry,h=e.otherCountryDelivery,b=e.cssEdition,j=e.calcDistance,u=this.props,p=u.startDate,O=u.handleStartDateChange,g=u.hint,x=u.handleChangeHint,y=new Date;return y.setDate(y.getDate()+2),Object(v.jsxs)(v.Fragment,{children:[i?Object(v.jsx)(f.a,{children:Object(v.jsx)(re.a,{children:Object(v.jsx)(D.a,{style:{textAlign:"center"},children:Object(v.jsx)(E.a,{className:"loadingSpinner",animation:"border",variant:"info"})})})}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"landingPageContainer",children:Object(v.jsxs)(f.a,{children:[Object(v.jsx)("h1",{className:"detailVersionChapter",children:"Konfigurieren Sie Ihr Abonnement"}),Object(v.jsxs)("p",{children:["Wer sich intelligent informieren m\xf6chte, liest ",Object(v.jsx)("em",{children:"die Zeitung"}),": gr\xfcndlich recherchierte Fakten, pr\xe4zise Analysen, klug geschriebene Kommentare. Eine Zeitung, gemacht von erstklassigen Journalisten f\xfcr Leser mit h\xf6chsten Anspr\xfcchen."]})]})}),Object(v.jsx)("div",{className:"landingPageContainer",children:Object(v.jsxs)(f.a,{children:[Object(v.jsx)("h2",{className:"detailVersionChapter",children:"W\xe4hlen Sie die Ausgabe, die am besten zu Ihnen passt:"}),Object(v.jsx)($.a,{component:"div",children:Object(v.jsxs)(_.a,{component:"label",container:!0,alignItems:"center",justifyContent:"center",spacing:0,children:[Object(v.jsx)(_.a,{item:!0,children:"Monatliche Zahlung"}),Object(v.jsx)(_.a,{item:!0,children:Object(v.jsx)(ee.a,{color:"primary",size:"medium",checked:t,onChange:this.handleYearlyChange,name:"checkedYearly"})}),Object(v.jsx)(_.a,{item:!0,children:"J\xe4hrliche Zahlung"})]})}),Object(v.jsx)($.a,{component:"div",children:Object(v.jsxs)(_.a,{component:"label",container:!0,alignItems:"center",justifyContent:"center",spacing:0,children:[Object(v.jsx)(_.a,{item:!0,children:"T\xe4gliches Abo (Mo-So)"}),Object(v.jsx)(_.a,{item:!0,children:Object(v.jsx)(ee.a,{color:"secondary",size:"medium",checked:r,onChange:this.handleAboChange,name:"aboDailyWeekend"})}),Object(v.jsx)(_.a,{item:!0,children:"Wochenendabo (Fr+Sa)"})]})}),Object(v.jsx)("div",{className:"detailVersionList",children:Object(v.jsxs)(re.a,{children:[Object(v.jsx)(D.a,{style:{marginBottom:"1rem"},children:Object(v.jsx)(ce,{cssCardClass:b.sport,title:"SPORTVERSION",aboWeekend:r,edition:a.sport,currentPriceID:n,period:s,otherCountry:o,calcDistance:j,otherCountryDelivery:h,checkedYearly:t,getDistanceSupplement:this.getDistanceSupplement,handleVariantSelect:this.handleVariantSelect})}),Object(v.jsx)(D.a,{style:{marginBottom:"1rem"},children:Object(v.jsx)(ce,{cssCardClass:b.stadt,title:"STADTAUSGABE",aboWeekend:r,edition:a.stadt,currentPriceID:n,period:s,otherCountry:o,calcDistance:j,otherCountryDelivery:h,checkedYearly:t,getDistanceSupplement:this.getDistanceSupplement,handleVariantSelect:this.handleVariantSelect})}),Object(v.jsx)(D.a,{style:{marginBottom:"1rem"},children:Object(v.jsx)(ce,{cssCardClass:b.land,title:"LANDKREISINFO",aboWeekend:r,edition:a.land,currentPriceID:n,period:s,otherCountry:o,calcDistance:j,otherCountryDelivery:h,checkedYearly:t,getDistanceSupplement:this.getDistanceSupplement,handleVariantSelect:this.handleVariantSelect})})]})})]})}),Object(v.jsx)("div",{className:"landingPageContainer",children:Object(v.jsxs)(f.a,{children:[Object(v.jsx)("h2",{className:"detailVersionChapter",children:"Wann soll Ihr Abo beginnen?"}),Object(v.jsx)(ae.a,{utils:te.a,locale:se.a,children:Object(v.jsx)(_.a,{container:!0,justifyContent:"space-around",children:Object(v.jsx)(ne.a,{disableToolbar:!0,minDate:y,variant:"inline",format:"dd.MM.yyyy",margin:"normal",id:"date-picker-startDate",label:"Start des Abos:",value:p,onChange:O,KeyboardButtonProps:{"aria-label":"change date"},invalidDateMessage:"Bitte geben Sie ein Datum in folgendem Format ein: dd.MM.yyyy",minDateMessage:"Das Abo kann fr\xfchestens in zwei Tagen starten!"})})})]})}),a[c].isAvailable?Object(v.jsx)("div",{className:"landingPageContainer",children:Object(v.jsxs)(f.a,{children:[Object(v.jsx)("h2",{className:"detailVersionChapter",children:"Haben Sie noch einen Hinweis f\xfcr den Austr\xe4ger?"}),Object(v.jsx)(ie.a,{children:Object(v.jsx)(le.a,{as:"textarea",placeholder:"z.B. Wo befindet sich ihr Zeitungsrohr? etc.",value:g,onChange:x,"aria-label":"With textarea"})})]})}):"",Object(v.jsx)("div",{className:"landingPageContainer",children:Object(v.jsxs)(f.a,{children:[Object(v.jsx)("h2",{className:"detailVersionChapter",children:"Wenn Sie fertig sind, dann k\xf6nnen Sie zur Kasse gehen"}),Object(v.jsx)(re.a,{children:Object(v.jsx)(D.a,{style:{textAlign:"center"},children:Object(v.jsx)(m.a,{onClick:this.handleCheckout,variant:"success",size:"lg",children:"Zur Kasse"})})})]})})]}),Object(v.jsxs)(Y.a,{show:d,onHide:this.handleClose,backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(v.jsx)(Y.a.Header,{closeButton:!0,children:Object(v.jsx)(Y.a.Title,{children:"Checkout"})}),Object(v.jsxs)(Y.a.Body,{style:{textAlign:"center"},children:[Object(v.jsx)("p",{children:"Bitte melden Sie sich an. Wenn Sie noch keinen User haben, dann k\xf6nnen Sie sich registrieren."}),Object(v.jsx)(l.b,{to:"/anmelden",children:Object(v.jsx)(m.a,{variant:"outline-primary",style:{marginRight:"10px"},children:"Anmelden"})}),Object(v.jsx)(l.b,{to:"/registrieren",children:Object(v.jsx)(m.a,{variant:"outline-secondary",children:"Registrieren"})})]}),Object(v.jsx)(Y.a.Footer,{children:Object(v.jsx)(m.a,{variant:"secondary",onClick:this.handleClose,children:"Abbrechen"})})]})]})}}]),s}(a.Component),oe=Object(j.g)(de),he=s(217),be=s(212),je=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){var e=this.props,t=e.validated,s=e.handleSubmit,a=e.update,n=e.user,r=e.addressType;return Object(v.jsxs)(S.a,{noValidate:!0,validated:t,onSubmit:s,children:[Object(v.jsxs)(S.a.Group,{controlId:"formGridAddress2",children:[Object(v.jsx)(S.a.Control,{required:!0,disabled:a,defaultValue:n[r].street,placeholder:"Stra\xdfe"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Stra\xdfe ein."})]}),Object(v.jsxs)(S.a.Row,{children:[Object(v.jsxs)(S.a.Group,{as:D.a,controlId:"formGridCity2",children:[Object(v.jsx)(S.a.Control,{required:!0,disabled:a,defaultValue:n[r].city,name:"city",placeholder:"Stadt"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Stadt ein."})]}),Object(v.jsxs)(S.a.Group,{as:D.a,controlId:"formGridZip2",children:[Object(v.jsx)(S.a.Control,{required:!0,type:"number",disabled:a,defaultValue:n[r].plz,name:"zip",placeholder:"PLZ"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Postleitzahl ein."})]})]}),Object(v.jsx)(S.a.Group,{controlId:"formGridState2",children:Object(v.jsxs)(S.a.Control,{required:!0,name:"state",disabled:a,as:"select",defaultValue:n[r].state,children:[Object(v.jsx)("option",{children:"Deutschland"}),Object(v.jsx)("option",{children:"\xd6sterreich"}),Object(v.jsx)("option",{children:"Schweiz"}),Object(v.jsx)("option",{children:"Frankreich"})]})}),Object(v.jsx)(m.a,{variant:"primary",type:"submit",style:{width:"100%"},children:a?Object(v.jsx)(E.a,{as:"span",animation:"border",size:"md",role:"status","aria-hidden":"true"}):"Aktualisieren"})]})}}]),s}(a.Component),ue=s(211),pe=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).getAboVersion=a.getAboVersion.bind(Object(o.a)(a)),a.getAboPrice=a.getAboPrice.bind(Object(o.a)(a)),a.getAboVariant=a.getAboVariant.bind(Object(o.a)(a)),a.getDeliveryMethod=a.getDeliveryMethod.bind(Object(o.a)(a)),a.getPaymentType=a.getPaymentType.bind(Object(o.a)(a)),a.handleCloseCancelAbo=a.handleCloseCancelAbo.bind(Object(o.a)(a)),a.handleCancelAbo=a.handleCancelAbo.bind(Object(o.a)(a)),a.handleCloseToast=a.handleCloseToast.bind(Object(o.a)(a)),a.state={showModalCancelAbo:!1,cancelAbo:!1,showToast:!1},a}return Object(d.a)(s,[{key:"getAboVersion",value:function(){switch(this.props.abo.localpaperversions){case 1:return"Stadtausgabe";case 2:return"Sportversion";case 3:return"Landkreisinfo"}}},{key:"getAboPrice",value:function(){var e,t;return"Annual"===this.props.abo.payment?(e=this.props.abo.calculatedyearprice,t="Jahr"):(e=this.props.abo.calculatedprice,t="Monat"),e+"\u20ac/"+t}},{key:"getAboVariant",value:function(){return"Weekend"===this.props.abo.subscriptiontype?"Wochenende":"T\xe4glich"}},{key:"getDeliveryMethod",value:function(){return"Post"===this.props.abo.deliverymethod?"Post":"Austr\xe4ger"}},{key:"getPaymentType",value:function(){return"Direct Debit"===this.props.abo.paymenttype?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("p",{children:["Per ",Object(v.jsx)("b",{children:"Lastschrift"})]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"IBAN:"})," ",this.props.abo.IBAN]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"BIC:"})," ",this.props.abo.BIC]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Kontoinhaber:"})," ",this.props.abo.AccountHolder]})]}):Object(v.jsxs)("p",{children:["Per ",Object(v.jsx)("b",{children:"Rechnung"})," an hinterlegte Rechnungsadresse"]})}},{key:"handleCloseCancelAbo",value:function(){this.state.cencelAbo||this.setState({showModalCancelAbo:!1})}},{key:"handleCancelAbo",value:function(){var e=this;this.setState({cancelAbo:!0});var t,s=this.props.abo;s.endabodate=(new Date).toLocaleString().split(",")[0],(t=s,Promise.all([z(t)]).then((function(e){return{success:e}}))).then((function(t){console.log("Abo storniert"),e.setState({cancelAbo:!1,showModalCancelAbo:!1,showToast:!0})}))}},{key:"handleCloseToast",value:function(){this.setState({showToast:!1})}},{key:"render",value:function(){var e=this,t=this.props,s=t.abo,a=t.allowCancel,n=this.state,r=n.showModalCancelAbo,i=n.cancelAbo,l=n.showToast;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(re.a,{children:[Object(v.jsxs)(D.a,{children:[Object(v.jsx)(Z.a.Item,{children:Object(v.jsx)("h3",{children:"Aboinformationen"})}),Object(v.jsxs)(Z.a.Item,{children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Ausgabe:"})," ",this.getAboVersion()]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Start:"})," ",s.startabodate]}),""!==s.endabodate?Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Ende:"})," ",s.endabodate]}):"",Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Preis:"})," ",this.getAboPrice()]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Abonnementvariante:"})," ",this.getAboVariant()]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Liefermethode:"})," ",this.getDeliveryMethod()]}),""!==s.hintDeliveryMan?Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Hinweis:"})," ",s.hintDeliveryMan]}):""]})]}),Object(v.jsxs)(D.a,{children:[Object(v.jsx)(Z.a.Item,{children:Object(v.jsx)("h3",{children:"Zahlungsinformationen"})}),Object(v.jsx)(Z.a.Item,{children:this.getPaymentType()})]})]}),a&&""===s.endabodate?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("br",{}),Object(v.jsx)(re.a,{children:Object(v.jsxs)(D.a,{children:[Object(v.jsx)(Z.a.Item,{children:Object(v.jsx)("h3",{children:"Abonnement stornieren"})}),Object(v.jsxs)(Z.a.Item,{children:[Object(v.jsx)("p",{children:"Wollen Sie das Abonnement stornieren?"}),Object(v.jsx)(m.a,{variant:"danger",onClick:function(){e.setState({showModalCancelAbo:!0})},children:"Abonnement stornieren"})," "]})]})})]}):"",Object(v.jsxs)(Y.a,{show:r,onHide:this.handleCloseCancelAbo,backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(v.jsx)(Y.a.Header,{closeButton:!0,children:Object(v.jsx)(Y.a.Title,{children:"Abonnement stornieren"})}),Object(v.jsx)(Y.a.Body,{style:{textAlign:"left"},children:Object(v.jsx)("p",{children:"Sind Sie sich sicher, dass Sie das Abonnement stornieren m\xf6chten?"})}),Object(v.jsxs)(Y.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",disabled:i,onClick:this.handleCloseCancelAbo,children:"Abbrechen"}),Object(v.jsx)(m.a,{variant:"danger",disabled:i,onClick:this.handleCancelAbo,children:i?Object(v.jsx)(E.a,{as:"span",animation:"border",size:"md",role:"status","aria-hidden":"true"}):"Abonnement stornieren"})]})]}),Object(v.jsxs)(G.a,{className:"p-3 toastSuccess",onClose:this.handleCloseToast,position:"bottom-center",bg:"success",show:l,delay:3e3,autohide:!0,children:[Object(v.jsxs)(G.a.Header,{closeButton:!1,children:[Object(v.jsx)(ue.a,{style:{marginRight:"0.4rem"}}),Object(v.jsx)("strong",{className:"me-auto",children:"Erfolgreich"})]}),Object(v.jsx)(G.a.Body,{children:"Sie haben Ihr Abo erfolgreich storniert!"})]})]})}}]),s}(a.Component),Oe=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).handleTabChange=a.handleTabChange.bind(Object(o.a)(a)),a.handlePaymentChange=a.handlePaymentChange.bind(Object(o.a)(a)),a.handleLastschriftInfoChange=a.handleLastschriftInfoChange.bind(Object(o.a)(a)),a.openModal=a.openModal.bind(Object(o.a)(a)),a.handleClose=a.handleClose.bind(Object(o.a)(a)),a.handleCheckoutAbo=a.handleCheckoutAbo.bind(Object(o.a)(a)),a.handleTabChangeDirectDebit=a.handleTabChangeDirectDebit.bind(Object(o.a)(a)),a.handleCloseDelAddress=a.handleCloseDelAddress.bind(Object(o.a)(a)),a.handleUserUpdate=a.handleUserUpdate.bind(Object(o.a)(a)),a.handleCloseDelAddressToastSuccess=a.handleCloseDelAddressToastSuccess.bind(Object(o.a)(a)),a.handleCloseDelAddressToastError=a.handleCloseDelAddressToastError.bind(Object(o.a)(a)),a.openChangeDelAddress=a.openChangeDelAddress.bind(Object(o.a)(a)),a.getAbo=a.getAbo.bind(Object(o.a)(a)),a.formDataSec=n.a.createRef(),a.formIBAN=n.a.createRef(),a.state={key:"#1",lastschrift:!1,IBAN:"",BIC:"",AccountHolder:a.props.user.firstname+" "+a.props.user.lastname,showModal:!1,validatedDataSecurity:!1,validatedIBAN:!1,saving:!1,showModalDelAddress:!1,updateDelAddress:!1,validatedDelAddress:!1,showDelAddressToastSuccess:!1,showDelAddressToastError:!1},a}return Object(d.a)(s,[{key:"handleTabChange",value:function(e){this.setState({key:e})}},{key:"handleTabChangeDirectDebit",value:function(e){this.state.lastschrift?(this.setState({validatedIBAN:!0}),!0===this.formIBAN.current.checkValidity()&&this.handleTabChange(e)):this.handleTabChange(e)}},{key:"handlePaymentChange",value:function(){this.setState((function(e){return{lastschrift:!e.lastschrift}}))}},{key:"handleLastschriftInfoChange",value:function(e){var t=e.target.name,s=e.target.value;switch(t){case"IBAN":this.setState({IBAN:s});break;case"BIC":this.setState({BIC:s});break;case"AccountHolder":this.setState({AccountHolder:s})}}},{key:"openModal",value:function(){this.setState({showModal:!0})}},{key:"handleClose",value:function(){this.state.saving||this.setState({showModal:!1})}},{key:"handleCloseDelAddress",value:function(){this.state.saving||this.setState({showModalDelAddress:!1})}},{key:"handleCloseDelAddressToastSuccess",value:function(){this.setState({showDelAddressToastSuccess:!1})}},{key:"handleCloseDelAddressToastError",value:function(){this.setState({showDelAddressToastError:!1})}},{key:"handleCheckoutAbo",value:function(){var e=this;if(this.setState({validatedDataSecurity:!0}),!0===this.formDataSec.current.checkValidity()){this.setState({saving:!0});var t=this.props.abo;t.dataprivacyaccepted=!0,t.paymenttype=this.state.lastschrift?"Direct Debit":"Invoice",t.cid=this.props.user.id,this.state.lastschrift&&(t.iban=this.state.IBAN,t.bic=this.state.BIC,t.AccountHolder=this.state.AccountHolder),function(e){return Promise.all([P(e)]).then((function(e){return{success:e}}))}(t).then((function(t){console.log("Save:"+Object.values(t)),e.setState({saving:!1}),e.props.clearAbo(),e.props.history.push("/checkout")}))}}},{key:"handleUserUpdate",value:function(e){var t=this;this.setState({validatedDelAddress:!0});var s=e.currentTarget;if(!1===s.checkValidity())e.stopPropagation();else{this.setState({updateDelAddress:!0});var a=this.props.user;a.billingAddress.street=s[0].value,a.billingAddress.city=s[1].value,a.billingAddress.plz=s[2].value,a.billingAddress.state=s[3].value,this.props.onCustomerUpdate(a).then((function(e){console.log("User updated "+Object.values(e)),t.setState({showModalDelAddress:!1,updateDelAddress:!1,showDelAddressToastSuccess:!0,validatedDelAddress:!1})})).catch((function(e){console.log("There was an error:"+e),t.setState({showModalDelAddress:!1,updateDelAddress:!1,showDelAddressToastError:!0,validatedDelAddress:!1})}))}e.preventDefault()}},{key:"openChangeDelAddress",value:function(){this.setState({showModalDelAddress:!0})}},{key:"getAbo",value:function(){var e=this.props.abo;return e.paymenttype=this.state.lastschrift?"Direct Debit":"Invoice",this.state.lastschrift&&(e.IBAN=this.state.IBAN,e.BIC=this.state.BIC,e.AccountHolder=this.state.AccountHolder),e}},{key:"render",value:function(){var e=this,t=this.state,s=t.key,a=t.lastschrift,n=t.IBAN,r=t.BIC,i=t.AccountHolder,l=t.showModal,c=t.validatedDataSecurity,d=t.validatedIBAN,o=t.saving,h=t.showModalDelAddress,b=t.updateDelAddress,j=t.validatedDelAddress,u=t.showDelAddressToastSuccess,p=t.showDelAddressToastError,O=this.props.user;return Object(v.jsxs)("div",{className:"landingPageContainer",children:[Object(v.jsxs)(f.a,{children:[Object(v.jsx)("h2",{className:"detailVersionChapter",children:"Sie haben es gleich geschafft!"}),Object(v.jsxs)(he.a,{activeKey:s,id:"checkout-tabs",className:"mb-3",children:[Object(v.jsxs)(be.a,{tabClassName:"tabCheckout",eventKey:"#1",title:"Rechnungsadresse",children:[Object(v.jsx)(m.a,{className:"btnEditAddress",onClick:this.openChangeDelAddress,variant:"primary",children:"Rechnungsadresse bearbeiten"}),Object(v.jsxs)(S.a,{children:[Object(v.jsxs)(S.a.Group,{controlId:"formGridAddress2",children:[Object(v.jsx)(S.a.Control,{required:!0,disabled:!0,defaultValue:O.billingAddress.street,placeholder:"Stra\xdfe"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Stra\xdfe ein."})]}),Object(v.jsxs)(S.a.Row,{children:[Object(v.jsxs)(S.a.Group,{as:D.a,controlId:"formGridCity2",children:[Object(v.jsx)(S.a.Control,{required:!0,disabled:!0,defaultValue:O.billingAddress.city,name:"city",placeholder:"Stadt"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Stadt ein."})]}),Object(v.jsxs)(S.a.Group,{as:D.a,controlId:"formGridZip2",children:[Object(v.jsx)(S.a.Control,{required:!0,type:"number",disabled:!0,defaultValue:O.billingAddress.plz,name:"zip",placeholder:"PLZ"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Postleitzahl ein."})]})]}),Object(v.jsx)(S.a.Group,{controlId:"formGridState2",children:Object(v.jsxs)(S.a.Control,{required:!0,name:"state",disabled:!0,as:"select",defaultValue:O.billingAddress.state,children:[Object(v.jsx)("option",{children:"Deutschland"}),Object(v.jsx)("option",{children:"\xd6sterreich"}),Object(v.jsx)("option",{children:"Schweiz"}),Object(v.jsx)("option",{children:"Frankreich"})]})})]}),Object(v.jsx)(m.a,{variant:"outline-primary",onClick:function(){return e.handleTabChange("#2")},children:"Weiter"})]}),Object(v.jsxs)(be.a,{tabClassName:"tabCheckout",eventKey:"#2",title:"Zahlungsinformationen",children:[Object(v.jsx)($.a,{component:"div",children:Object(v.jsxs)(_.a,{component:"label",container:!0,alignItems:"center",justifyContent:"center",spacing:0,children:[Object(v.jsx)(_.a,{item:!0,children:"Rechnung"}),Object(v.jsx)(_.a,{item:!0,children:Object(v.jsx)(ee.a,{color:"secondary",size:"medium",checked:a,onChange:this.handlePaymentChange,name:"aboDailyWeekend"})}),Object(v.jsx)(_.a,{item:!0,children:"Lastschrift"})]})}),a?Object(v.jsxs)(S.a,{noValidate:!0,validated:d,ref:this.formIBAN,children:[Object(v.jsxs)(S.a.Group,{controlId:"formGridIBAN",children:[Object(v.jsx)(S.a.Control,{name:"IBAN",value:n,onChange:this.handleLastschriftInfoChange,required:!0,placeholder:"IBAN"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre IBAN ein."})]}),Object(v.jsxs)(S.a.Group,{controlId:"formGridBIC",children:[Object(v.jsx)(S.a.Control,{name:"BIC",value:r,onChange:this.handleLastschriftInfoChange,required:!0,placeholder:"BIC"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre BIC ein."})]}),Object(v.jsxs)(S.a.Group,{controlId:"formGridAccountHolder",children:[Object(v.jsx)(S.a.Control,{name:"AccountHolder",value:i,onChange:this.handleLastschriftInfoChange,required:!0,placeholder:"Kontoinhalber"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie den Kontoinhaber ein."})]})]}):"",Object(v.jsx)(m.a,{variant:"outline-secondary",style:{marginRight:"10px"},onClick:function(){return e.handleTabChange("#1")},children:"Zur\xfcck"}),Object(v.jsx)(m.a,{variant:"outline-primary",onClick:function(){return e.handleTabChangeDirectDebit("#3")},children:"Weiter"})]}),Object(v.jsxs)(be.a,{tabClassName:"tabCheckout",eventKey:"#3",title:"\xdcbersicht",children:[Object(v.jsxs)(re.a,{children:[Object(v.jsxs)(D.a,{children:[Object(v.jsx)(Z.a.Item,{children:Object(v.jsx)("h3",{children:"Kundeninformationen"})}),Object(v.jsxs)(Z.a.Item,{children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Anrede:"})," ",O.titleAddress]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Vorname:"})," ",O.firstname]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Nachname:"})," ",O.lastname]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Firmenname:"})," ",O.companyname]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"E-Mail:"})," ",O.email]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Phone:"})," ",O.phone]})]})]}),Object(v.jsxs)(D.a,{children:[Object(v.jsx)(Z.a.Item,{children:Object(v.jsx)("h3",{children:"Adresse"})}),Object(v.jsxs)(Z.a.Item,{children:[Object(v.jsx)("p",{children:Object(v.jsx)("b",{children:"Lieferadresse:"})}),Object(v.jsx)("p",{children:O.deliveryAddress.street}),Object(v.jsx)("p",{children:O.deliveryAddress.city+" "+O.deliveryAddress.plz}),Object(v.jsx)("p",{children:O.deliveryAddress.state})]}),Object(v.jsxs)(Z.a.Item,{children:[Object(v.jsx)("p",{children:Object(v.jsx)("b",{children:"Rechnungsadresse:"})}),Object(v.jsx)("p",{children:O.billingAddress.street}),Object(v.jsx)("p",{children:O.billingAddress.city+" "+O.billingAddress.plz}),Object(v.jsx)("p",{children:O.billingAddress.state})]})]})]}),Object(v.jsx)("br",{}),Object(v.jsx)(pe,{abo:this.getAbo(),allowCancel:!1}),Object(v.jsx)("br",{}),Object(v.jsx)(m.a,{variant:"outline-secondary",style:{marginRight:"10px"},onClick:function(){return e.handleTabChange("#2")},children:"Zur\xfcck"}),Object(v.jsx)(m.a,{variant:"outline-primary",onClick:this.openModal,children:"Fertig"})]})]})]}),Object(v.jsxs)(Y.a,{show:l,onHide:this.handleClose,backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(v.jsx)(Y.a.Header,{closeButton:!0,children:Object(v.jsx)(Y.a.Title,{children:"Checkout"})}),Object(v.jsxs)(Y.a.Body,{style:{textAlign:"center"},children:[Object(v.jsx)("p",{children:"M\xf6chten Sie das Abo verbindlich bestellen?"}),Object(v.jsx)(S.a,{noValidate:!0,validated:c,ref:this.formDataSec,children:Object(v.jsx)(S.a.Group,{children:Object(v.jsxs)(S.a.Check,{children:[Object(v.jsx)(S.a.Check.Input,{disabled:o,required:!0}),Object(v.jsx)(S.a.Check.Label,{children:"Ich akzeptiere die Datenschatzbestimmungen"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Sie m\xfcssen dem Datenschutz zustimmen!"})]})})})]}),Object(v.jsxs)(Y.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",disabled:o,onClick:this.handleClose,children:"Abbrechen"}),Object(v.jsx)(m.a,{variant:"primary",disabled:o,onClick:this.handleCheckoutAbo,children:o?Object(v.jsx)(E.a,{as:"span",animation:"border",size:"md",role:"status","aria-hidden":"true"}):"Bestellen"})]})]}),Object(v.jsxs)(Y.a,{show:h,onHide:this.handleCloseDelAddress,backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(v.jsx)(Y.a.Header,{closeButton:!0,children:Object(v.jsx)(Y.a.Title,{children:"Rechnungsadresse aktualisieren"})}),Object(v.jsx)(Y.a.Body,{style:{textAlign:"center"},children:Object(v.jsx)(je,{validated:j,handleSubmit:this.handleUserUpdate,update:b,user:O,addressType:"billingAddress"})}),Object(v.jsx)(Y.a.Footer,{children:Object(v.jsx)(m.a,{variant:"secondary",disabled:o,onClick:this.handleCloseDelAddress,children:"Abbrechen"})})]}),Object(v.jsxs)(G.a,{className:"p-3 toastSuccess",onClose:this.handleCloseDelAddressToastSuccess,position:"bottom-center",bg:"success",show:u,delay:3e3,autohide:!0,children:[Object(v.jsxs)(G.a.Header,{closeButton:!1,children:[Object(v.jsx)(ue.a,{style:{marginRight:"0.4rem"}}),Object(v.jsx)("strong",{className:"me-auto",children:"Erfolgreich"})]}),Object(v.jsx)(G.a.Body,{children:"Ihre Rechnungsadresse wurde erfolgreich aktualisiert!"})]}),Object(v.jsxs)(G.a,{className:"p-3 toastError",onClose:this.handleCloseDelAddressToastError,position:"bottom-center",show:p,delay:3e3,autohide:!0,children:[Object(v.jsxs)(G.a.Header,{closeButton:!1,children:[Object(v.jsx)(ue.a,{style:{marginRight:"0.4rem"}}),Object(v.jsx)("strong",{className:"me-auto",children:"Fehlgeschlagen"})]}),Object(v.jsx)(G.a.Body,{children:"Ihre Rechnungsadresse wurde leider nicht aktualisiert. Bitte versuchen Sie es sp\xe4ter erneut!"})]})]})}}]),s}(a.Component),me=Object(j.g)(Oe),ge=s(213),xe=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(){return Object(c.a)(this,s),t.apply(this,arguments)}return Object(d.a)(s,[{key:"render",value:function(){var e=this.props,t=e.validated,s=e.handleSubmit,a=e.update,n=e.user;return Object(v.jsxs)(S.a,{noValidate:!0,validated:t,onSubmit:s,children:[Object(v.jsx)(S.a.Group,{controlId:"formCompanyName",children:Object(v.jsx)(S.a.Control,{disabled:a,defaultValue:n.companyname,name:"companyName",placeholder:"Firmenname"})}),Object(v.jsx)(S.a.Group,{controlId:"formAnrede",children:Object(v.jsxs)(S.a.Control,{disabled:a,defaultValue:n.titleAddress,required:!0,as:"select",children:[Object(v.jsx)("option",{children:"Herr"}),Object(v.jsx)("option",{children:"Frau"})]})}),Object(v.jsxs)(S.a.Row,{children:[Object(v.jsxs)(S.a.Group,{as:D.a,controlId:"formFirstName",children:[Object(v.jsx)(S.a.Control,{disabled:a,defaultValue:n.firstname,required:!0,name:"firstName",placeholder:"Vorname"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihren Vornamen ein."})]}),Object(v.jsxs)(S.a.Group,{as:D.a,controlId:"formLastName",children:[Object(v.jsx)(S.a.Control,{disabled:a,defaultValue:n.lastname,required:!0,name:"lastName",placeholder:"Nachname"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihren Nachnamen ein."})]})]}),Object(v.jsxs)(S.a.Group,{controlId:"formBasicEmail",children:[Object(v.jsx)(S.a.Control,{disabled:a,defaultValue:n.email,required:!0,type:"email",placeholder:"E-Mail-Adresse"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre E-Mail-Adresse ein."})]}),Object(v.jsxs)(S.a.Group,{controlId:"formBasicPhone",children:[Object(v.jsx)(S.a.Control,{disabled:a,defaultValue:n.phone,required:!0,type:"number",placeholder:"Telefonnummer"}),Object(v.jsx)(S.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Telefonnummer ein."})]}),Object(v.jsx)(m.a,{variant:"primary",type:"submit",style:{width:"100%"},children:a?Object(v.jsx)(E.a,{as:"span",animation:"border",size:"md",role:"status","aria-hidden":"true"}):"Aktualisieren"})]})}}]),s}(a.Component),ve=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).handleUserUpdate=a.handleUserUpdate.bind(Object(o.a)(a)),a.handleCloseBilAddress=a.handleCloseBilAddress.bind(Object(o.a)(a)),a.handleCloseDelAddress=a.handleCloseDelAddress.bind(Object(o.a)(a)),a.handleCloseUser=a.handleCloseUser.bind(Object(o.a)(a)),a.handleCloseDeleteUser=a.handleCloseDeleteUser.bind(Object(o.a)(a)),a.handleDeleteUser=a.handleDeleteUser.bind(Object(o.a)(a)),a.state={showModalBilAddress:!1,validatedBilAddress:!1,updateBilAddress:!1,showModalDelAddress:!1,validatedDelAddress:!1,updateDelAddress:!1,showModalUser:!1,validateUser:!1,updateUser:!1,showModalDeleteUser:!1,deleteUser:!1},a}return Object(d.a)(s,[{key:"handleUserUpdate",value:function(e,t){var s=this;e.preventDefault();var a=e.currentTarget;switch(!1===a.checkValidity()&&e.stopPropagation(),t){case"del":if(this.setState({validatedDelAddress:!0}),!1===!a.checkValidity()){this.setState({updateDelAddress:!0});var n=this.props.user;n.deliveryAddress.street=a[0].value,n.deliveryAddress.city=a[1].value,n.deliveryAddress.plz=a[2].value,n.deliveryAddress.state=a[3].value,this.props.onCustomerUpdate(n).then((function(e){console.log("User updated "+Object.values(e)),s.setState({showModalDelAddress:!1,updateDelAddress:!1,validatedDelAddress:!1})})).catch((function(e){console.log("There was an error:"+e),s.setState({showModalDelAddress:!1,updateDelAddress:!1,validatedDelAddress:!1})}))}break;case"bil":if(this.setState({validatedBilAddress:!0}),!1===!a.checkValidity()){this.setState({updateBilAddress:!0});var r=this.props.user;r.billingAddress.street=a[0].value,r.billingAddress.city=a[1].value,r.billingAddress.plz=a[2].value,r.billingAddress.state=a[3].value,this.props.onCustomerUpdate(r).then((function(e){console.log("User updated "+Object.values(e)),s.setState({showModalBilAddress:!1,updateBilAddress:!1,validatedBilAddress:!1})})).catch((function(e){console.log("There was an error:"+e),s.setState({showModalBilAddress:!1,updateBilAddress:!1,validatedBilAddress:!1})}))}break;case"user":if(this.setState({validatedUser:!0}),!1===!a.checkValidity()){this.setState({updateUser:!0});var i=this.props.user;i.companyname=a[0].value,i.titleAddress=a[1].value,i.firstname=a[2].value,i.lastname=a[3].value,i.email=a[4].value,i.phone=a[5].value,this.props.onCustomerUpdate(i).then((function(e){console.log("User updated "+Object.values(e)),s.setState({showModalUser:!1,updateUser:!1,validatedUser:!1})})).catch((function(e){console.log("There was an error:"+e),s.setState({showModalUser:!1,updateUser:!1,validatedUser:!1})}))}}}},{key:"handleCloseBilAddress",value:function(){this.state.updateBilAddress||this.setState({showModalBilAddress:!1})}},{key:"handleCloseDelAddress",value:function(){this.state.updateDelAddress||this.setState({showModalDelAddress:!1})}},{key:"handleCloseUser",value:function(){this.state.updateUser||this.setState({showModalUser:!1})}},{key:"handleCloseDeleteUser",value:function(){this.state.deleteUser||this.setState({showModalDeleteUser:!1})}},{key:"handleDeleteUser",value:function(){var e=this;this.setState({deleteUser:!0}),this.props.onCustomerDelete().then((function(t){console.log("User deleted "+Object.values(t)),e.setState({showModalDeleteUser:!1,deleteUser:!1})})).catch((function(t){console.log("There was an error:"+t),e.setState({showModalDeleteUser:!1,deleteUser:!1})}))}},{key:"render",value:function(){var e=this,t=this.props.user,s=this.state,a=s.showModalBilAddress,n=s.validatedBilAddress,r=s.updateBilAddress,i=s.showModalDelAddress,l=s.validatedDelAddress,c=s.updateDelAddress,d=s.showModalUser,o=s.validateUser,h=s.updateUser,b=s.showModalDeleteUser,j=s.deleteUser;return Object(v.jsxs)(f.a,{children:[Object(v.jsx)(re.a,{children:Object(v.jsxs)(D.a,{children:[Object(v.jsxs)(Z.a.Item,{children:[Object(v.jsx)("h3",{style:{float:"left"},children:"Benutzerdaten"}),Object(v.jsx)(m.a,{variant:"info",className:"btnEditUserData",onClick:function(){e.setState({showModalUser:!0})},children:Object(v.jsx)(ge.a,{style:{color:"white",fontSize:"1.5rem"}})})," "]}),Object(v.jsxs)(Z.a.Item,{children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Anrede:"})," ",t.titleAddress]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Vorname:"})," ",t.firstname]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Nachname:"})," ",t.lastname]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Firmenname:"})," ",t.companyname]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"E-Mail:"})," ",t.email]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("b",{children:"Phone:"})," ",t.phone]})]})]})}),Object(v.jsx)("br",{}),Object(v.jsxs)(re.a,{children:[Object(v.jsxs)(D.a,{children:[Object(v.jsxs)(Z.a.Item,{children:[Object(v.jsx)("h3",{style:{float:"left"},children:"Lieferadresse"}),Object(v.jsx)(m.a,{variant:"info",className:"btnEditUserData",onClick:function(){e.setState({showModalDelAddress:!0})},children:Object(v.jsx)(ge.a,{style:{color:"white",fontSize:"1.5rem"}})})," "]}),Object(v.jsxs)(Z.a.Item,{children:[Object(v.jsx)("p",{children:t.deliveryAddress.street}),Object(v.jsx)("p",{children:t.deliveryAddress.city+" "+t.deliveryAddress.plz}),Object(v.jsx)("p",{children:t.deliveryAddress.state})]})]}),Object(v.jsxs)(D.a,{children:[Object(v.jsxs)(Z.a.Item,{children:[Object(v.jsx)("h3",{style:{float:"left"},children:"Rechnungsadresse"}),Object(v.jsx)(m.a,{variant:"info",className:"btnEditUserData",onClick:function(){e.setState({showModalBilAddress:!0})},children:Object(v.jsx)(ge.a,{style:{color:"white",fontSize:"1.5rem"}})})," "]}),Object(v.jsxs)(Z.a.Item,{children:[Object(v.jsx)("p",{children:t.billingAddress.street}),Object(v.jsx)("p",{children:t.billingAddress.city+" "+t.billingAddress.plz}),Object(v.jsx)("p",{children:t.billingAddress.state})]})]})]}),Object(v.jsx)("br",{}),Object(v.jsx)(re.a,{children:Object(v.jsxs)(D.a,{children:[Object(v.jsx)(Z.a.Item,{children:Object(v.jsx)("h3",{children:"Benutzer l\xf6schen"})}),Object(v.jsxs)(Z.a.Item,{children:[Object(v.jsx)("p",{children:"Auf Ihren Wunsch werden wir ihre Benutzerdaten l\xf6schen!"}),Object(v.jsx)(m.a,{variant:"danger",onClick:function(){e.setState({showModalDeleteUser:!0})},children:"Benutzer l\xf6schen"})," "]})]})}),Object(v.jsxs)(Y.a,{show:a,onHide:this.handleCloseBilAddress,backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(v.jsx)(Y.a.Header,{closeButton:!0,children:Object(v.jsx)(Y.a.Title,{children:"Rechnungsadresse aktualisieren"})}),Object(v.jsx)(Y.a.Body,{style:{textAlign:"center"},children:Object(v.jsx)(je,{validated:n,handleSubmit:function(t){return e.handleUserUpdate(t,"bil")},update:r,user:t,addressType:"billingAddress"})}),Object(v.jsx)(Y.a.Footer,{children:Object(v.jsx)(m.a,{variant:"secondary",disabled:r,onClick:this.handleCloseBilAddress,children:"Abbrechen"})})]}),Object(v.jsxs)(Y.a,{show:i,onHide:this.handleCloseDelAddress,backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(v.jsx)(Y.a.Header,{closeButton:!0,children:Object(v.jsx)(Y.a.Title,{children:"Lieferadresse aktualisieren"})}),Object(v.jsx)(Y.a.Body,{style:{textAlign:"center"},children:Object(v.jsx)(je,{validated:l,handleSubmit:function(t){return e.handleUserUpdate(t,"del")},update:c,user:t,addressType:"deliveryAddress"})}),Object(v.jsx)(Y.a.Footer,{children:Object(v.jsx)(m.a,{variant:"secondary",disabled:c,onClick:this.handleCloseDelAddress,children:"Abbrechen"})})]}),Object(v.jsxs)(Y.a,{show:d,onHide:this.handleCloseUser,backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(v.jsx)(Y.a.Header,{closeButton:!0,children:Object(v.jsx)(Y.a.Title,{children:"Benutzerdaten aktualisieren"})}),Object(v.jsx)(Y.a.Body,{style:{textAlign:"center"},children:Object(v.jsx)(xe,{validated:o,handleSubmit:function(t){return e.handleUserUpdate(t,"user")},update:h,user:t})}),Object(v.jsx)(Y.a.Footer,{children:Object(v.jsx)(m.a,{variant:"secondary",disabled:h,onClick:this.handleCloseUser,children:"Abbrechen"})})]}),Object(v.jsxs)(Y.a,{show:b,onHide:this.handleCloseDeleteUser,backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(v.jsx)(Y.a.Header,{closeButton:!0,children:Object(v.jsx)(Y.a.Title,{children:"Benutzer l\xf6schen"})}),Object(v.jsx)(Y.a.Body,{style:{textAlign:"left"},children:Object(v.jsx)("p",{children:"Sind Sie sich sicher? Diese Option l\xe4sst sich nicht r\xfcckg\xe4ngig machen!"})}),Object(v.jsxs)(Y.a.Footer,{children:[Object(v.jsx)(m.a,{variant:"secondary",disabled:j,onClick:this.handleCloseDeleteUser,children:"Abbrechen"}),Object(v.jsx)(m.a,{variant:"danger",disabled:j,onClick:this.handleDeleteUser,children:j?Object(v.jsx)(E.a,{as:"span",animation:"border",size:"md",role:"status","aria-hidden":"true"}):"Benutzer endg\xfcltig l\xf6schen"})]})]})]})}}]),s}(a.Component),ye=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={isLoading:!0,abos:{}},a}return Object(d.a)(s,[{key:"componentDidMount",value:function(){var e,t=this;(e=this.props.user.id,Promise.all([T(e)]).then((function(e){return{allAbos:Object(I.a)(e,1)[0]}}))).then((function(e){console.log("Abos geladen"),t.setState({isLoading:!1,abos:e.allAbos})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,s=e.abos;return Object(v.jsx)(v.Fragment,{children:t?Object(v.jsx)(f.a,{children:Object(v.jsx)(re.a,{children:Object(v.jsx)(D.a,{style:{textAlign:"center"},children:Object(v.jsx)(E.a,{className:"loadingSpinner",animation:"border",variant:"info"})})})}):s.map((function(e,t){return Object(v.jsx)("div",{className:"landingPageContainer",children:Object(v.jsxs)(f.a,{children:[Object(v.jsxs)("h2",{children:["Abonnement ",t+1]}),Object(v.jsx)("br",{}),Object(v.jsx)(pe,{abo:e,allowCancel:!0})]})},e.id)}))})}}]),s}(a.Component),fe=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).handleClose=a.handleClose.bind(Object(o.a)(a)),a.state={show:!1},a}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.props.showToast&&this.setState({show:!0})}},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var e=this,t=this.props.user,s=this.state.show;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"landingPageContainer",children:Object(v.jsxs)(f.a,{children:[Object(v.jsx)(A.a,{alt:"logo",src:g,width:"50%",className:"d-block align-top",style:{marginRight:"auto",marginLeft:"auto"},fluid:!0})," "]})}),Object(v.jsx)("div",{className:"landingPageContainer",children:Object(v.jsxs)(f.a,{style:{textAlign:"center"},children:[Object(v.jsxs)("h1",{children:["Vielen Dank ",t.titleAddress+" "+t.firstname+" "+t.lastname,"!"]}),Object(v.jsx)("p",{children:"Sie haben Ihr Abonnement erfolgreich abgeschlossen. Herzlichen Dank an Ihrem Vertrauen."})]})}),Object(v.jsx)("div",{className:"landingPageContainer",children:Object(v.jsxs)(f.a,{children:[Object(v.jsx)("h1",{children:"M\xf6chten sie noch etwas tun?"}),Object(v.jsx)("p",{children:"Zur\xfcck zur Startseite:"}),Object(v.jsx)("p",{children:Object(v.jsx)(m.a,{variant:"outline-info",onClick:function(){e.props.history.push("/")},children:"Zur Startseite"})}),Object(v.jsx)("p",{children:"Ihre Daten k\xf6nnen Sie im Benutzerprofil einsehen und \xe4ndern:"}),Object(v.jsx)("p",{children:Object(v.jsx)(m.a,{variant:"outline-success",onClick:function(){e.props.history.push("/benutzerprofil")},children:"Zum Benutzerprofil"})}),Object(v.jsxs)("p",{children:["Einen \xdcberblick \xfcber Ihre abgeschlossenen Abonnements finden Sie hier.",Object(v.jsx)("br",{}),"Ebenfalls k\xf6nnen Sie ganz gem\xfctlich ein Abonnement \xfcber das Abonnement Menu stornieren."]}),Object(v.jsx)("p",{children:Object(v.jsx)(m.a,{variant:"outline-warning",onClick:function(){e.props.history.push("/abonnements")},children:"Zu Ihren Abonnements"})})]})}),Object(v.jsxs)(G.a,{className:"p-3 toastSuccess",onClose:this.handleClose,position:"bottom-center",bg:"success",show:s,delay:3e3,autohide:!0,children:[Object(v.jsxs)(G.a.Header,{closeButton:!1,children:[Object(v.jsx)(ue.a,{style:{marginRight:"0.4rem"}}),Object(v.jsx)("strong",{className:"me-auto",children:"Erfolgreich"})]}),Object(v.jsx)(G.a.Body,{children:"Sie haben Ihr Abo erfolgreich abgeschlossen!"})]})]})}}]),s}(a.Component),Ae=Object(j.g)(fe),Ce=s(144);var ke=function(e){var t=e.isAuth,s=e.component,a=Object(Ce.a)(e,["isAuth","component"]);return Object(v.jsx)(j.b,Object(B.a)(Object(B.a)({},a),{},{render:function(e){return t?Object(v.jsx)(s,Object(B.a)({},a)):Object(v.jsx)(j.a,{to:{pathname:"/",state:{from:e.location}}})}}))},Se=(s(174),function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).handleLogIn=a.handleLogIn.bind(Object(o.a)(a)),a.handleLogOut=a.handleLogOut.bind(Object(o.a)(a)),a.loginUser=a.loginUser.bind(Object(o.a)(a)),a.changeDeliveryAddress=a.changeDeliveryAddress.bind(Object(o.a)(a)),a.handleStartDateChange=a.handleStartDateChange.bind(Object(o.a)(a)),a.handleChangeHint=a.handleChangeHint.bind(Object(o.a)(a)),a.onAboCreate=a.onAboCreate.bind(Object(o.a)(a)),a.onCustomerUpdate=a.onCustomerUpdate.bind(Object(o.a)(a)),a.clearAbo=a.clearAbo.bind(Object(o.a)(a)),a.onCustomerDelete=a.onCustomerDelete.bind(Object(o.a)(a)),a.getMinDate=a.getMinDate.bind(Object(o.a)(a)),a.state={isLoggedIn:!1,user:{email:"",deliveryAddress:{city:"",plz:"",street:"",state:"Deutschland"},billingAddress:{city:"",plz:"",street:"",state:"Deutschland"}},startDate:a.getMinDate(),hint:"",abo:{}},a}return Object(d.a)(s,[{key:"getMinDate",value:function(){var e=new Date;return e.setDate(e.getDate()+2),e}},{key:"handleLogIn",value:function(e){this.loginUser(e),0===Object.keys(this.state.abo).length&&this.state.abo.constructor===Object?this.props.history.push("/"):this.props.history.push("/konfigurator/checkout")}},{key:"handleLogOut",value:function(){return this.setState({isLoggedIn:!1,user:{email:"",deliveryAddress:{city:"",plz:"",street:"",state:"Deutschland"},billingAddress:{city:"",plz:"",street:"",state:"Deutschland"}},abo:{},startDate:this.getMinDate(),hint:""}),this.props.history.push("/"),null}},{key:"loginUser",value:function(e){this.setState({isLoggedIn:!0,user:e})}},{key:"changeDeliveryAddress",value:function(e,t){var s=this.state.user;s.deliveryAddress[e]=t,this.onCustomerUpdate(s).then((function(e){console.log("User updated "+e.toString())})).catch((function(e){return console.log("There was an error:"+e)}))}},{key:"onCustomerUpdate",value:function(e){var t=this;return new Promise((function(s,a){var n;(n=e,Promise.all([N(n)]).then((function(e){return{success:e}}))).then((function(a){t.setState({user:e}),s(a)}),(function(){a("Error while updating user")}))}))}},{key:"onCustomerDelete",value:function(){var e=this;return new Promise((function(t,s){var a;(a=e.state.user.id,Promise.all([U(a)]).then((function(e){return{success:e}}))).then((function(s){e.handleLogOut(),t(s)}),(function(){s("Error while deleting user")}))}))}},{key:"handleStartDateChange",value:function(e){this.setState({startDate:e})}},{key:"handleChangeHint",value:function(e){this.setState({hint:e.target.value})}},{key:"onAboCreate",value:function(e){this.setState({abo:e})}},{key:"clearAbo",value:function(){this.setState({abo:{},startDate:this.getMinDate(),hint:""})}},{key:"render",value:function(){var e=this.state,t=e.isLoggedIn,s=e.user,a=e.startDate,n=e.hint,r=e.abo;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(y,{isLoggedIn:t,userName:s.email}),Object(v.jsxs)(j.d,{children:[Object(v.jsx)(j.b,{exact:!0,path:"/konfigurator",children:Object(v.jsx)(X,{loginUser:this.loginUser,user:s,isLoggedIn:t,changeDeliveryAddress:this.changeDeliveryAddress})}),Object(v.jsx)(ke,{exact:!0,path:"/konfigurator/detail",isAuth:""!==s.deliveryAddress.street,component:oe,startDate:a,handleStartDateChange:this.handleStartDateChange,hint:n,handleChangeHint:this.handleChangeHint,user:s,isLoggedIn:t,onAboCreate:this.onAboCreate}),Object(v.jsx)(ke,{exact:!0,path:"/konfigurator/checkout",isAuth:t,component:me,user:s,abo:r,isLoggedIn:t,onCustomerUpdate:this.onCustomerUpdate,clearAbo:this.clearAbo}),Object(v.jsx)(ke,{exact:!0,path:"/checkout",isAuth:t,component:Ae,isLoggedIn:t,user:s,showToast:!0}),Object(v.jsx)(ke,{exact:!0,path:"/benutzerprofil",isAuth:t,component:ve,user:s,onCustomerUpdate:this.onCustomerUpdate,onCustomerDelete:this.onCustomerDelete}),Object(v.jsx)(ke,{exact:!0,path:"/abonnements",isAuth:t,component:ye,user:s}),Object(v.jsx)(j.b,{exact:!0,path:"/anmelden",children:Object(v.jsx)(R,{handleLogIn:this.handleLogIn})}),Object(v.jsx)(j.b,{exact:!0,path:"/registrieren",children:Object(v.jsx)(H,{handleLogIn:this.handleLogIn,user:s})}),Object(v.jsx)(j.b,{exact:!0,path:"/abmelden",children:this.handleLogOut}),Object(v.jsx)(j.b,{exact:!0,path:"/",children:Object(v.jsx)(k,{isLoggedIn:t,user:s})})]})]})}}]),s}(a.Component)),De=Object(j.g)(Se);s(175);i.a.render(Object(v.jsx)(l.a,{children:Object(v.jsx)(De,{})}),document.getElementById("root"))}},[[176,1,2]]]);
//# sourceMappingURL=main.cb9c19f3.chunk.js.map