(this.webpackJsonpabobestellung=this.webpackJsonpabobestellung||[]).push([[0],{186:function(e,t,n){},188:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(29),i=n.n(r),c=n(31),l=n(19),d=n.n(l),o=n(43),h=n(36),b=n(21),j=n(22),u=n(12),p=n(24),x=n(23),O=n(38),m=n(101),g=n(94),v=n(100),f=n(14),y=n.p+"static/media/logo.e9589ad7.png",A=n.p+"static/media/avatar.9771c045.jpg",C=n(132);n(176),n(189);C.a.initializeApp({apiKey:"AIzaSyBGHdy4jQM7kaVneI5TiEzupmJ-4htjbis",authDomain:"abobestellung-kfru.firebaseapp.com",projectId:"abobestellung-kfru",storageBucket:"abobestellung-kfru.appspot.com",messagingSenderId:"228261219425",appId:"1:228261219425:web:e8ce90dffd59b34e672e20"});var k=C.a.auth(),S=C.a.firestore(),D=function(){var e=Object(h.a)(d.a.mark((function e(t,n){var a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return a=S.doc("users/".concat(t.uid)),e.next=5,a.get();case 5:if(e.sent.exists){e.next=16;break}return s=t.email,e.prev=8,e.next=11,a.set(Object(o.a)({email:s},n));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),console.error("Error creating user document",e.t0);case 16:return e.abrupt("return",I(t.uid));case 17:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t,n){return e.apply(this,arguments)}}(),I=function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,S.doc("users/".concat(t)).get();case 5:return n=e.sent,e.abrupt("return",Object(o.a)({uid:t},n.data()));case 9:e.prev=9,e.t0=e.catch(2),console.error("Error fetching user",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(h.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return a=S.doc("users/".concat(t.uid)),e.next=5,a.get();case 5:if(!e.sent.exists){e.next=17;break}return e.prev=7,e.next=10,a.update(Object(o.a)({},n));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.error("Error updating user document",e.t0);case 15:e.next=19;break;case 17:return console.error("No User available to update"),e.abrupt("return");case 19:return e.abrupt("return",I(t.uid));case 20:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(t,n){return e.apply(this,arguments)}}(),B=function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return n=S.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(!e.sent.exists){e.next=17;break}return e.prev=7,e.next=10,n.delete();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.error("Error delete user document",e.t0);case 15:e.next=19;break;case 17:return console.error("No User available to delete"),e.abrupt("return");case 19:return e.abrupt("return",I(t.uid));case 20:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S.collection("abos").add(t).then((function(e){return T(e)})).catch((function(e){console.error("Error adding document: ",e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(h.a)(d.a.mark((function e(t,n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return a=S.doc("abos/".concat(t)),e.next=5,a.get();case 5:if(!e.sent.exists){e.next=17;break}return e.prev=7,e.next=10,a.update(Object(o.a)({},n));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),console.error("Error updating abo document",e.t0);case 15:e.next=19;break;case 17:return console.error("No Abo available to update"),e.abrupt("return");case 19:return e.abrupt("return",T(t));case 20:case"end":return e.stop()}}),e,null,[[7,12]])})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,S.doc("abos/".concat(t)).get();case 5:return n=e.sent,e.abrupt("return",Object(o.a)({aboRef:t},n.data()));case 9:e.prev=9,e.t0=e.catch(2),console.error("Error fetching abo",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),z=n(2),U=Object(a.createContext)({user:null}),L=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).componentDidMount=function(){k.onAuthStateChanged(function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(t);case 2:n=e.sent,a.setState({user:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},a.updateUser=a.updateUser.bind(Object(u.a)(a)),a.state={user:null},a}return Object(j.a)(n,[{key:"updateUser",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(this.state.user);case 2:t=e.sent,this.setState({user:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(z.jsx)(U.Provider,{value:{user:this.state.user,updateUser:this.updateUser},children:this.props.children})}}]),n}(a.Component),V=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){return Object(z.jsxs)(m.a,{collapseOnSelect:!0,expand:"md",bg:"light",variant:"light",sticky:"top",children:[Object(z.jsx)(c.b,{to:"/",children:Object(z.jsxs)(m.a.Brand,{children:[Object(z.jsx)("img",{alt:"logo",src:y,width:"55",className:"d-inline-block align-top",style:{marginRight:"10px"}})," ","Die Zeitung"]})}),Object(z.jsx)(m.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(z.jsxs)(m.a.Collapse,{id:"responsive-navbar-nav",children:[Object(z.jsx)(g.a,{className:"mr-auto",children:Object(z.jsx)(c.b,{to:"/konfigurator",children:"Produktkonfigurator"})}),Object(z.jsx)(g.a,{children:this.context.user?Object(z.jsxs)(v.a,{alignRight:!0,navbar:!0,children:[Object(z.jsxs)(v.a.Toggle,{className:"headerProfileBtn",children:[Object(z.jsx)("div",{className:"headerName",children:this.context.user.email}),Object(z.jsx)("img",{alt:"Avatar",src:A,className:"d-inline-block align-top avatar"})," "]}),Object(z.jsxs)(v.a.Menu,{children:[Object(z.jsx)(c.b,{className:"headerLink, dropdown-item",to:"/benutzerprofil",children:"Benutzerprofil"}),Object(z.jsx)(c.b,{className:"headerLink, dropdown-item",to:"/abonnements",children:"Abonnements"}),Object(z.jsx)(v.a.Divider,{}),Object(z.jsx)(c.b,{className:"headerLink, dropdown-item",to:"/abmelden",children:"Abmelden"})]})]}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(c.b,{to:"/anmelden",children:Object(z.jsx)(f.a,{variant:"outline-primary",style:{marginRight:"10px"},children:"Anmelden"})}),Object(z.jsx)(c.b,{to:"/registrieren",children:Object(z.jsx)(f.a,{variant:"outline-secondary",children:"Registrieren"})})]})})]})]})}}]),n}(a.Component);V.contextType=U;var P=V,F=n(30),E=n(118),G=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("div",{className:"landingPageContainer",children:Object(z.jsxs)(F.a,{children:[Object(z.jsx)(E.a,{alt:"logo",src:y,width:"80%",className:"d-inline-block align-top",style:{marginRight:"10%",marginLeft:"10%"},fluid:!0})," "]})}),Object(z.jsx)("div",{className:"landingPageContainer",children:Object(z.jsxs)(F.a,{children:[this.context.user?Object(z.jsxs)("h1",{children:["Herzlich Willkommen zur\xfcck ",this.context.user.firstname+" "+this.context.user.lastname,"!"]}):Object(z.jsx)("h1",{children:"Herzlich Willkommen!"}),Object(z.jsxs)("p",{children:["Hier bei deiner Zeitung vor Ort!",Object(z.jsx)("br",{}),"Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet."]})]})}),this.context.user?Object(z.jsx)("div",{className:"landingPageContainer",children:Object(z.jsxs)(F.a,{children:[Object(z.jsx)("h1",{children:"Was m\xf6chten Sie heute tun?"}),Object(z.jsx)("p",{children:"Ihre Daten k\xf6nnen Sie im Benutzerprofil einsehen und \xe4ndern:"}),Object(z.jsx)("p",{children:Object(z.jsx)(f.a,{variant:"outline-success",onClick:function(){e.props.history.push("/benutzerprofil")},children:"Zum Benutzerprofil"})}),Object(z.jsxs)("p",{children:["Einen \xdcberblick \xfcber Ihre abgeschlossenen Abonnements finden Sie hier.",Object(z.jsx)("br",{}),"Ebenfalls k\xf6nnen Sie ganz gem\xfctlich ein Abonnement \xfcber das Abonnement Menu stornieren."]}),Object(z.jsx)("p",{children:Object(z.jsx)(f.a,{variant:"outline-warning",onClick:function(){e.props.history.push("/abonnements")},children:"Zu Ihren Abonnements"})})]})}):"",Object(z.jsx)("div",{className:"landingPageContainer",children:Object(z.jsxs)(F.a,{children:[Object(z.jsx)("h1",{children:"Schlie\xdfe noch heute ein Abo ab!"}),Object(z.jsx)("p",{children:"In unserem individuellen Abokonfigurator finden Sie bestimmt das wonach Sie suchen."}),Object(z.jsx)("p",{children:Object(z.jsx)(f.a,{variant:"outline-primary",onClick:function(){e.props.history.push("/konfigurator")},children:"Konfigurator starten"})})]})}),Object(z.jsx)("div",{className:"landingPageContainer",children:Object(z.jsxs)(F.a,{children:[Object(z.jsx)("h1",{children:"Jetzt auch online!"}),Object(z.jsx)("p",{children:"Seit neustem gibt es unsere Ausgabe auch ganz bequem online auf das Ger\xe4t Ihrer Wahl. Konfigurieren Sie Ihr ganz pers\xf6nliches Abonnement jetzt!"}),Object(z.jsx)("p",{children:Object(z.jsx)(f.a,{variant:"outline-primary",onClick:function(){e.props.history.push("/konfigurator")},children:"Konfigurator starten"})})]})})]})}}]),n}(a.Component);G.contextType=U;var H=Object(O.g)(G),W=n(6),R=n(18),q=n(33),Z=n(41),K=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).onChangeDifferentBillingAddress=a.onChangeDifferentBillingAddress.bind(Object(u.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a.toggleDuplicateEmailAddress=a.toggleDuplicateEmailAddress.bind(Object(u.a)(a)),a.state={differentBillingAddress:!1,validated:!1,signIn:!1,duplicateEmailAddress:!1},a}return Object(j.a)(n,[{key:"onChangeDifferentBillingAddress",value:function(){this.setState((function(e){return{differentBillingAddress:!e.differentBillingAddress}}))}},{key:"handleSubmit",value:function(){var e=Object(h.a)(d.a.mark((function e(t){var n,a,s,r,i,c,l,o,h,b,j,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.setState({validated:!0}),!1!==(n=t.currentTarget).checkValidity()){e.next=7;break}t.stopPropagation(),e.next=32;break;case 7:return console.log("Erstelle Kunde"),a=n[8].checked?n[13].value:n[9].value,s=n[8].checked?n[15].value:n[11].value,r=n[1].value,i=n[2].value,c=n[3].value,l=n[0].value,o=n[8].checked?n[14].value:n[10].value,h={city:n[5].value,plz:n[6].value,street:n[4].value,state:n[7].value},b={city:n[8].checked?n[10].value:n[5].value,plz:n[8].checked?n[11].value:n[6].value,street:n[8].checked?n[9].value:n[4].value,state:n[8].checked?n[12].value:n[7].value},e.prev=17,e.next=20,k.createUserWithEmailAndPassword(a,s);case 20:return j=e.sent,u=j.user,e.next=24,D(u,{titleAddress:r,firstname:i,lastname:c,companyname:l,phone:o,billingAddress:b,deliveryAddress:h});case 24:this.setState({signIn:!1}),this.props.handleLogIn(),e.next=32;break;case 28:e.prev=28,e.t0=e.catch(17),console.error("Error Signing up with email and password",e.t0),"auth/email-already-in-use"===e.t0.code&&this.setState({duplicateEmailAddress:!0,signIn:!1});case 32:case"end":return e.stop()}}),e,this,[[17,28]])})));return function(t){return e.apply(this,arguments)}}()},{key:"toggleDuplicateEmailAddress",value:function(){this.setState({duplicateEmailAddress:!1})}},{key:"render",value:function(){var e=this.state,t=e.differentBillingAddress,n=e.validated,a=e.signIn,s=e.duplicateEmailAddress,r=this.props.deliveryAddress;return Object(z.jsxs)("div",{className:"registrieren",children:[Object(z.jsx)("h1",{className:"registrierenHeadline",children:"Registrieren"}),Object(z.jsxs)(W.a,{noValidate:!0,validated:n,onSubmit:this.handleSubmit,children:[Object(z.jsx)(W.a.Group,{controlId:"formCompanyName",children:Object(z.jsx)(W.a.Control,{disabled:a,name:"companyName",placeholder:"Firmenname"})}),Object(z.jsx)(W.a.Group,{controlId:"formAnrede",children:Object(z.jsxs)(W.a.Control,{disabled:a,required:!0,as:"select",defaultValue:"Herr",children:[Object(z.jsx)("option",{children:"Herr"}),Object(z.jsx)("option",{children:"Frau"})]})}),Object(z.jsxs)(W.a.Row,{children:[Object(z.jsxs)(W.a.Group,{as:R.a,controlId:"formFirstName",children:[Object(z.jsx)(W.a.Control,{disabled:a,required:!0,name:"firstName",placeholder:"Vorname"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihren Vornamen ein."})]}),Object(z.jsxs)(W.a.Group,{as:R.a,controlId:"formLastName",children:[Object(z.jsx)(W.a.Control,{disabled:a,required:!0,name:"lastName",placeholder:"Nachname"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihren Nachnamen ein."})]})]}),t?Object(z.jsx)("p",{children:"Lieferdresse"}):Object(z.jsx)("p",{children:"Adresse"}),Object(z.jsxs)(W.a.Group,{controlId:"formGridAddress1",children:[Object(z.jsx)(W.a.Control,{disabled:a,required:!0,defaultValue:r?r.street:"",placeholder:"Stra\xdfe"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Stra\xdfe ein."})]}),Object(z.jsxs)(W.a.Row,{children:[Object(z.jsxs)(W.a.Group,{as:R.a,controlId:"formGridCity1",children:[Object(z.jsx)(W.a.Control,{disabled:a,required:!0,name:"city",defaultValue:r?r.city:"",placeholder:"Stadt"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Stadt ein."})]}),Object(z.jsxs)(W.a.Group,{as:R.a,controlId:"formGridZip1",children:[Object(z.jsx)(W.a.Control,{disabled:a,required:!0,defaultValue:r?r.plz:"",type:"number",name:"zip",placeholder:"PLZ",minLength:5}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie eine valide Postleitzahl ein."})]})]}),Object(z.jsx)(W.a.Group,{controlId:"formGridState1",children:Object(z.jsxs)(W.a.Control,{disabled:a,required:!0,name:"state",as:"select",defaultValue:r?r.state:"Deutschland",children:[Object(z.jsx)("option",{children:"Deutschland"}),Object(z.jsx)("option",{children:"\xd6sterreich"}),Object(z.jsx)("option",{children:"Schweiz"}),Object(z.jsx)("option",{children:"Frankreich"})]})}),Object(z.jsx)(W.a.Group,{children:Object(z.jsx)(W.a.Check,{disabled:a,onChange:this.onChangeDifferentBillingAddress,label:"Abweichende Rechnungsadresse"})}),t?Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("p",{children:"Rechnungsdresse"}),Object(z.jsxs)(W.a.Group,{controlId:"formGridAddress2",children:[Object(z.jsx)(W.a.Control,{disabled:a,required:!0,placeholder:"Stra\xdfe"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Stra\xdfe ein."})]}),Object(z.jsxs)(W.a.Row,{children:[Object(z.jsxs)(W.a.Group,{as:R.a,controlId:"formGridCity2",children:[Object(z.jsx)(W.a.Control,{disabled:a,required:!0,name:"city",placeholder:"Stadt"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Stadt ein."})]}),Object(z.jsxs)(W.a.Group,{as:R.a,controlId:"formGridZip2",children:[Object(z.jsx)(W.a.Control,{disabled:a,required:!0,type:"number",name:"zip",placeholder:"PLZ",minLength:5}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie eine valide Postleitzahl ein."})]})]}),Object(z.jsx)(W.a.Group,{controlId:"formGridState2",children:Object(z.jsxs)(W.a.Control,{disabled:a,required:!0,name:"state",as:"select",defaultValue:"Deutschland",children:[Object(z.jsx)("option",{children:"Deutschland"}),Object(z.jsx)("option",{children:"\xd6sterreich"}),Object(z.jsx)("option",{children:"Schweiz"}),Object(z.jsx)("option",{children:"Frankreich"})]})})]}):"",Object(z.jsx)("br",{}),Object(z.jsxs)(W.a.Group,{controlId:"formBasicEmail",children:[Object(z.jsx)(W.a.Control,{disabled:a,required:!0,type:"email",placeholder:"E-Mail-Adresse"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre E-Mail-Adresse ein."})]}),Object(z.jsxs)(W.a.Group,{controlId:"formBasicPhone",children:[Object(z.jsx)(W.a.Control,{disabled:a,required:!0,type:"number",placeholder:"Telefonnummer"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Telefonnummer ein."})]}),Object(z.jsxs)(W.a.Group,{controlId:"formBasicPassword",children:[Object(z.jsx)(W.a.Control,{disabled:a,"aria-describedby":"passwordHelpBlock",required:!0,type:"password",placeholder:"Passwort",minLength:6}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihr Passwort ein."}),Object(z.jsx)(W.a.Text,{id:"passwordHelpBlock",muted:!0,children:"Ihr Passwort muss mindestens 6 Zeichen haben."})]}),Object(z.jsxs)(q.a,{className:"toastErrorBorder",show:s,onClose:this.toggleDuplicateEmailAddress,children:[Object(z.jsx)(q.a.Header,{className:"toastError",children:Object(z.jsx)("strong",{className:"mr-auto",children:"Fehler"})}),Object(z.jsxs)(q.a.Body,{children:["Die eingegebene E-Mail-Adresse ist bereits vorhanden. M\xf6chten Sie sich ",Object(z.jsx)(c.b,{to:"/anmelden",children:"anmelden"}),"?"]})]}),Object(z.jsx)("br",{}),Object(z.jsx)(f.a,{variant:"primary",type:"submit",style:{width:"100%"},children:a?Object(z.jsx)(Z.a,{as:"span",animation:"border",size:"md",role:"status","aria-hidden":"true"}):"Registrieren"}),Object(z.jsxs)(W.a.Text,{muted:!0,style:{textAlign:"right"},children:["Sie haben bereits einen User? ",Object(z.jsx)(c.b,{to:"/anmelden",children:"Anmelden"})]})]})]})}}]),n}(a.Component),Y=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).handleSubmit=a.handleSubmit.bind(Object(u.a)(a)),a.toggleUserMissing=a.toggleUserMissing.bind(Object(u.a)(a)),a.togglePasswordWrong=a.togglePasswordWrong.bind(Object(u.a)(a)),a.state={validated:!1,logIn:!1,userMissing:!1,passwordWrong:!1},a}return Object(j.a)(n,[{key:"handleSubmit",value:function(e){var t=this,n=e.currentTarget;if(!1===n.checkValidity())e.stopPropagation();else{this.setState({logIn:!0}),k.signInWithEmailAndPassword(n[0].value,n[1].value).catch((function(e){console.error("Error signing in with password and email",e),"auth/wrong-password"===e.code&&t.setState({logIn:!1,passwordWrong:!0,userMissing:!1}),"auth/user-not-found"===e.code&&t.setState({logIn:!1,userMissing:!0,passwordWrong:!1})}));var a=this;k.onAuthStateChanged((function(e){e&&(a.setState({login:!1}),a.props.handleSuccessfullyLogIn())}))}e.preventDefault(),this.setState({validated:!0})}},{key:"toggleUserMissing",value:function(){this.setState({userMissing:!1})}},{key:"togglePasswordWrong",value:function(){this.setState({passwordWrong:!1})}},{key:"render",value:function(){var e=this.state,t=e.validated,n=e.logIn,a=e.userMissing,s=e.passwordWrong;return Object(z.jsxs)(W.a,{noValidate:!0,validated:t,onSubmit:this.handleSubmit,children:[Object(z.jsxs)(W.a.Group,{controlId:"formBasicEmail",children:[Object(z.jsx)(W.a.Control,{disabled:n,required:!0,type:"email",placeholder:"E-Mail-Adresse"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre E-Mail-Adresse ein."})]}),Object(z.jsxs)(W.a.Group,{controlId:"formBasicPassword",children:[Object(z.jsx)(W.a.Control,{disabled:n,required:!0,type:"password",placeholder:"Passwort"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihr Passwort ein."})]}),Object(z.jsxs)(q.a,{className:"toastErrorBorder, loginToast",show:a,onClose:this.toggleUserMissing,children:[Object(z.jsx)(q.a.Header,{className:"toastError",children:Object(z.jsx)("strong",{className:"mr-auto",children:"Fehler"})}),Object(z.jsxs)(q.a.Body,{children:["Die eingegebene E-Mail-Adresse ist nicht vorhanden. Wollen Sie sich ",Object(z.jsx)(c.b,{to:"/registrieren",children:"registrieren"}),"?"]})]}),Object(z.jsxs)(q.a,{className:"toastErrorBorder, loginToast",show:s,onClose:this.togglePasswordWrong,children:[Object(z.jsx)(q.a.Header,{className:"toastError",children:Object(z.jsx)("strong",{className:"mr-auto",children:"Fehler"})}),Object(z.jsx)(q.a.Body,{children:"Das eingegebe Passwort ist falsch. Bitte versuchen Sie es erneut!"})]}),Object(z.jsx)(f.a,{variant:"primary",type:"submit",style:{width:"100%"},children:n?Object(z.jsx)(Z.a,{as:"span",animation:"border",size:"md",role:"status","aria-hidden":"true"}):"Anmelden"}),Object(z.jsxs)(W.a.Text,{muted:!0,style:{textAlign:"right"},children:["Sie haben noch keinen User? ",Object(z.jsx)(c.b,{to:"/registrieren",children:"Registrieren"})]})]})}}]),n}(a.Component),J=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).handleSuccessfullyLogIn=a.handleSuccessfullyLogIn.bind(Object(u.a)(a)),a}return Object(j.a)(n,[{key:"handleSuccessfullyLogIn",value:function(){this.props.handleLogIn()}},{key:"render",value:function(){return Object(z.jsxs)("div",{className:"registrieren",children:[Object(z.jsx)("h1",{className:"registrierenHeadline",children:"Anmelden"}),Object(z.jsx)(Y,{handleSuccessfullyLogIn:this.handleSuccessfullyLogIn})]})}}]),n}(a.Component),Q=n(53),X=n(25),$=n(97),_=n(15),ee=n.p+"static/media/newspaper.12fc473d.jpg",te=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).handleLogIn=a.handleLogIn.bind(Object(u.a)(a)),a.handleClose=a.handleClose.bind(Object(u.a)(a)),a.handleSuccessfullyLogIn=a.handleSuccessfullyLogIn.bind(Object(u.a)(a)),a.onChangeAddress=a.onChangeAddress.bind(Object(u.a)(a)),a.startConfig=a.startConfig.bind(Object(u.a)(a)),a.formAddress=s.a.createRef(),a.state={showModal:!1,validatedAddress:!1,deliveryAddress:{state:"Deutschland"}},a}return Object(j.a)(n,[{key:"handleLogIn",value:function(){this.setState({showModal:!0})}},{key:"handleClose",value:function(){this.setState({showModal:!1})}},{key:"handleSuccessfullyLogIn",value:function(){this.setState({showModal:!1})}},{key:"onChangeAddress",value:function(e){var t=e.target.name,n=e.target.value,a=this.state.deliveryAddress;a[t]=n,this.setState({deliveryAddress:a})}},{key:"startConfig",value:function(e){var t=this.formAddress.current;e.preventDefault(),!1===t.checkValidity()?e.stopPropagation():(this.props.changeDeliveryAddress(this.state.deliveryAddress),this.props.history.push("/konfigurator/detail")),this.setState({validatedAddress:!0})}},{key:"render",value:function(){var e=this.state,t=e.showModal,n=e.validatedAddress;return Object(z.jsxs)(F.a,{style:{paddingTop:"1.5rem"},children:[Object(z.jsxs)(Q.a,{children:[Object(z.jsx)(Q.a.Img,{variant:"top",className:"productImage",src:ee}),Object(z.jsxs)(Q.a.Body,{children:[Object(z.jsx)(Q.a.Title,{style:{fontSize:"2rem"},children:"Die Zeitung - Gedruckt"}),Object(z.jsxs)(Q.a.Text,{children:["Wer sich intelligent informieren m\xf6chte, liest ",Object(z.jsx)("em",{children:"die Zeitung"}),": gr\xfcndlich recherchierte Fakten, pr\xe4zise Analysen, klug geschriebene Kommentare. Eine Zeitung, gemacht von erstklassigen Journalisten f\xfcr Leser mit h\xf6chsten Anspr\xfcchen."]})]}),Object(z.jsxs)(X.a,{className:"list-group-flush",children:[Object(z.jsxs)($.a,{children:["Geben Sie unten Ihre Adresse an und w\xe4hlen Sie anschlie\xdfend folgende Optionen in unserem Konfigurator:",Object(z.jsx)("br",{}),Object(z.jsx)("br",{}),Object(z.jsxs)("ul",{children:[Object(z.jsx)("li",{children:"Ausgabe"}),Object(z.jsx)("li",{children:"Art des Abonnements"}),Object(z.jsx)("li",{children:"Zahlungsart und Zahlungszeitpunkt"}),Object(z.jsx)("li",{children:"Start-Datum Ihres Abonnements"})]})]}),Object(z.jsx)($.a,{children:Object(z.jsxs)(W.a,{noValidate:!0,validated:n,ref:this.formAddress,children:[Object(z.jsx)("h4",{className:"deliveryAddress",children:"Lieferadresse"}),this.context.user?Object(z.jsxs)(f.a,{className:"headerProfileBtn deliveryLoginBtn",children:[Object(z.jsx)("img",{alt:"Avatar",src:A,className:"d-inline-block align-top avatar deliveryAvatar"})," ",Object(z.jsx)("div",{className:"headerName",children:this.context.user.email})]}):Object(z.jsxs)(f.a,{className:"headerProfileBtn deliveryLoginBtn",onClick:this.handleLogIn,children:[Object(z.jsx)("img",{alt:"Avatar",src:A,className:"d-inline-block align-top avatar deliveryAvatar"})," ",Object(z.jsx)("div",{className:"headerName",children:"Mit Account fortfahren"})]}),Object(z.jsxs)(W.a.Group,{controlId:"formGridAddress",children:[Object(z.jsx)(W.a.Control,{name:"street",required:!0,placeholder:"Stra\xdfe",defaultValue:this.context.user?this.context.user.deliveryAddress.street:"",onChange:this.onChangeAddress}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Stra\xdfe ein."})]}),Object(z.jsxs)(W.a.Row,{children:[Object(z.jsxs)(W.a.Group,{as:R.a,controlId:"formGridCity",children:[Object(z.jsx)(W.a.Control,{required:!0,name:"city",placeholder:"Stadt",defaultValue:this.context.user?this.context.user.deliveryAddress.city:"",onChange:this.onChangeAddress}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Stadt ein."})]}),Object(z.jsxs)(W.a.Group,{as:R.a,controlId:"formGridZip",children:[Object(z.jsx)(W.a.Control,{required:!0,type:"number",name:"plz",placeholder:"PLZ",defaultValue:this.context.user?this.context.user.deliveryAddress.plz:"",onChange:this.onChangeAddress}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Postleitzahl ein."})]})]}),Object(z.jsx)(W.a.Group,{controlId:"formGridState",children:Object(z.jsxs)(W.a.Control,{required:!0,name:"state",as:"select",defaultValue:this.context.user?this.context.user.deliveryAddress.state:"",onChange:this.onChangeAddress,children:[Object(z.jsx)("option",{children:"Deutschland"}),Object(z.jsx)("option",{children:"\xd6sterreich"}),Object(z.jsx)("option",{children:"Schweiz"}),Object(z.jsx)("option",{children:"Frankreich"})]})})]})})]}),Object(z.jsx)(Q.a.Footer,{children:Object(z.jsx)(Q.a,{children:Object(z.jsxs)(Q.a.Body,{children:[Object(z.jsx)("div",{className:"priceTag",children:Object(z.jsx)("div",{className:"priceTagValue",children:"10\u20ac*"})}),Object(z.jsxs)("div",{className:"priceTagText",children:["Die Zeitung - Gedruckt",Object(z.jsx)(f.a,{onClick:this.startConfig,style:{float:"right"},children:"Konfigurieren"})]}),Object(z.jsx)("p",{className:"priceTagMuted",children:"*Grundpreis"})]})})})]}),Object(z.jsxs)(_.a,{show:t,onHide:this.handleClose,backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(z.jsx)(_.a.Header,{closeButton:!0,children:Object(z.jsx)(_.a.Title,{children:"Anmelden"})}),Object(z.jsx)(_.a.Body,{children:Object(z.jsx)(Y,{handleSuccessfullyLogIn:this.handleSuccessfullyLogIn})}),Object(z.jsx)(_.a.Footer,{children:Object(z.jsx)(f.a,{variant:"secondary",onClick:this.handleClose,children:"Abbrechen"})})]})]})}}]),n}(a.Component);te.contextType=U;var ne=Object(O.g)(te),ae=n(217),se=n(221),re=n(231),ie=n(152),ce=n(153),le=n(46),de=n(227),oe=n(133),he=n(223),be=n(147),je=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.edition,a=t.cssCardClass,s=t.title,r=t.aboWeekend,i=t.currentPriceID,c=t.period,l=t.otherCountry,d=t.otherCountryDelivery,o=t.checkedYearly;return Object(z.jsxs)(Q.a,{className:"detailVersion "+a,children:[Object(z.jsxs)(Q.a.Header,{className:"detailVersionHeader",children:[s.toUpperCase(),Object(z.jsx)("br",{}),Object(z.jsxs)("span",{children:[Object(z.jsx)("span",{className:"detailVersionHeaderValue",children:(r?Math.round(.6*n.price[i]):n.price[i])+this.props.getDistanceSupplement()}),"\u20ac/",c]})]}),Object(z.jsxs)(X.a,{variant:"flush",style:{borderBottom:"1px solid rgba(0,0,0,.125)"},children:[Object(z.jsx)(X.a.Item,{className:"detailVersionItem",children:"Globaler Teil inkl. ausgew\xe4hlter Lokalteil"}),n.isAvailable?Object(z.jsx)(X.a.Item,{className:"detailVersionItem",children:"Geliefert durch Austr\xe4ger"}):Object(z.jsx)(X.a.Item,{className:"detailVersionItem",children:"Wird mit DHL versendet"}),n.isAvailable?Object(z.jsxs)(X.a.Item,{className:"detailVersionItem",children:["inkl. ",this.props.getDistanceSupplement(),"\u20ac Entfernungspauschale"]}):Object(z.jsxs)(X.a.Item,{className:"detailVersionItem",children:["inkl. ",l?0===i?d:d/2:0===this.props.getDistanceSupplement()?"20":2*this.props.getDistanceSupplement(),"\u20ac Versandkosten ",l?"(International)":""]}),Object(z.jsx)(X.a.Item,{className:"detailVersionItem",children:r?"Wochnendausgabe (Fr+Sa)":"T\xe4gliche Ausgabe"}),Object(z.jsxs)(X.a.Item,{className:"detailVersionItem",children:[o?"J\xe4hrliche ":"Monatliche "," Zahlung"]})]}),Object(z.jsx)(Q.a.Footer,{className:"detailVersionFooter",children:Object(z.jsx)(f.a,{onClick:function(){return e.props.handleVariantSelect(n.id)},children:"Ausw\xe4hlen"})})]})}}]),n}(a.Component),ue=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).handleYearlyChange=a.handleYearlyChange.bind(Object(u.a)(a)),a.handleAboChange=a.handleAboChange.bind(Object(u.a)(a)),a.handleCheckout=a.handleCheckout.bind(Object(u.a)(a)),a.handleClose=a.handleClose.bind(Object(u.a)(a)),a.handleVariantSelect=a.handleVariantSelect.bind(Object(u.a)(a)),a.getDistanceSupplement=a.getDistanceSupplement.bind(Object(u.a)(a)),a.state={isLoading:!0,checkedYearly:!0,aboWeekend:!1,period:"J\xe4hrlich",price:{},currentPriceID:0,calcDistance:0,selectedAbo:"stadt",showModal:!1,otherCountry:!1,otherCountryDelivery:50,cssEdition:{sport:"",stadt:"recommended",land:""}},a}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this;if("Deutschland"===(this.context.user?this.context.user.deliveryAddress.state:this.props.deliveryAddress.state)){var t=this.context.user?this.context.user.deliveryAddress.plz:this.props.deliveryAddress.plz,n={"Access-Control-Allow-Origin":"*"};fetch("http://localhost:4500/functions/getDistanceFromCompanyToDestinationPlz/".concat(t),{method:"GET",header:n}).then((function(e){return e.json()})).then((function(a){var s=a.distance;console.log("Got Distance "+s),fetch("http://localhost:4500/functions/getLocalVersionsForPlz/".concat(t),{method:"GET",header:n}).then((function(e){return e.json()})).then((function(t){console.log("Got "+Object.values(t).length+" LocalVersions");var n=!1,a=!1,r=!1;Object.values(t).forEach((function(e){switch(e.name){case"Stadtausgabe":n=!0;break;case"Sportversion":a=!0;break;case"Landkreisinfos":r=!0}})),e.setState({calcDistance:s,isLoading:!1,price:{sport:{id:2,isAvailable:a,price:[130,17]},stadt:{id:1,isAvailable:n,price:[120,16]},land:{id:3,isAvailable:r,price:[140,18]}}})}))}))}else this.setState({calcDistance:0,isLoading:!1,otherCountry:!0,price:{sport:{id:2,isAvailable:!1,price:[130+this.state.otherCountryDelivery,17+this.state.otherCountryDelivery/2]},stadt:{id:1,isAvailable:!1,price:[120+this.state.otherCountryDelivery,16+this.state.otherCountryDelivery/2]},land:{id:3,isAvailable:!1,price:[140+this.state.otherCountryDelivery,18+this.state.otherCountryDelivery/2]}}})}},{key:"handleYearlyChange",value:function(){this.state.checkedYearly?this.setState((function(e){return{checkedYearly:!e.checkedYearly,period:"Monatlich",currentPriceID:1}})):this.setState((function(e){return{checkedYearly:!e.checkedYearly,period:"J\xe4hrlich",currentPriceID:0}}))}},{key:"handleAboChange",value:function(){this.setState((function(e){return{aboWeekend:!e.aboWeekend}}))}},{key:"handleVariantSelect",value:function(e){switch(e){case 2:this.setState({selectedAbo:"sport",cssEdition:{sport:"recommended",stadt:"",land:""}});break;case 1:this.setState({selectedAbo:"stadt",cssEdition:{sport:"",stadt:"recommended",land:""}});break;case 3:this.setState({selectedAbo:"land",cssEdition:{sport:"",stadt:"",land:"recommended"}})}}},{key:"handleCheckout",value:function(){var e=new Date;if(e.setDate(e.getDate()+2),this.props.startDate.setHours(0,0,0,0)>=e.setHours(0,0,0,0)){var t={userId:this.context.user?this.context.user.uid:0,created:(new Date).toLocaleString().split(",")[0],startabodate:this.props.startDate.toLocaleString().split(",")[0],endabodate:"",dataprivacyaccepted:!1,abotype:"Printed",deliverymethod:this.state.price[this.state.selectedAbo].isAvailable?"Delivery man":"Post",paymenttype:"",payment:this.state.checkedYearly?"Annual":"Monthly",subscriptiontype:this.state.aboWeekend?"Weekend":"Daily",calculatedprice:(this.state.aboWeekend?Math.round(.6*this.state.price[this.state.selectedAbo].price[1]):this.state.price[this.state.selectedAbo].price[1])+this.getDistanceSupplement(),calculatedyearprice:(this.state.aboWeekend?Math.round(.6*this.state.price[this.state.selectedAbo].price[0]):this.state.price[this.state.selectedAbo].price[0])+this.getDistanceSupplement(),localpaperversions:this.state.price[this.state.selectedAbo].id,hintDeliveryMan:this.state.price[this.state.selectedAbo].isAvailable?this.props.hint:""};this.props.onAboCreate(t),this.context.user?this.props.history.push("/konfigurator/checkout"):this.setState({showModal:!0})}}},{key:"handleClose",value:function(){this.setState({showModal:!1})}},{key:"getDistanceSupplement",value:function(){var e=this.state.calcDistance;return 0===e?0:e>0&&e<=10?5:e>10&&e<=30?10:e>30?15:void 0}},{key:"render",value:function(){var e=this.state,t=e.checkedYearly,n=e.period,a=e.price,s=e.currentPriceID,r=e.aboWeekend,i=e.isLoading,l=e.selectedAbo,d=e.showModal,o=e.otherCountry,h=e.otherCountryDelivery,b=e.cssEdition,j=e.calcDistance,u=this.props,p=u.startDate,x=u.handleStartDateChange,O=u.hint,m=u.handleChangeHint,g=new Date;return g.setDate(g.getDate()+2),Object(z.jsxs)(z.Fragment,{children:[i?Object(z.jsx)(F.a,{children:Object(z.jsx)(oe.a,{children:Object(z.jsx)(R.a,{style:{textAlign:"center"},children:Object(z.jsx)(Z.a,{className:"loadingSpinner",animation:"border",variant:"info"})})})}):Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("div",{className:"landingPageContainer",children:Object(z.jsxs)(F.a,{children:[Object(z.jsx)("h1",{className:"detailVersionChapter",children:"Konfigurieren Sie Ihr Abonnement"}),Object(z.jsxs)("p",{children:["Wer sich intelligent informieren m\xf6chte, liest ",Object(z.jsx)("em",{children:"die Zeitung"}),": gr\xfcndlich recherchierte Fakten, pr\xe4zise Analysen, klug geschriebene Kommentare. Eine Zeitung, gemacht von erstklassigen Journalisten f\xfcr Leser mit h\xf6chsten Anspr\xfcchen."]})]})}),Object(z.jsx)("div",{className:"landingPageContainer",children:Object(z.jsxs)(F.a,{children:[Object(z.jsx)("h2",{className:"detailVersionChapter",children:"W\xe4hlen Sie die Ausgabe, die am besten zu Ihnen passt:"}),Object(z.jsx)(ae.a,{component:"div",children:Object(z.jsxs)(se.a,{component:"label",container:!0,alignItems:"center",justifyContent:"center",spacing:0,children:[Object(z.jsx)(se.a,{item:!0,children:"Monatliche Zahlung"}),Object(z.jsx)(se.a,{item:!0,children:Object(z.jsx)(re.a,{color:"primary",size:"medium",checked:t,onChange:this.handleYearlyChange,name:"checkedYearly"})}),Object(z.jsx)(se.a,{item:!0,children:"J\xe4hrliche Zahlung"})]})}),Object(z.jsx)(ae.a,{component:"div",children:Object(z.jsxs)(se.a,{component:"label",container:!0,alignItems:"center",justifyContent:"center",spacing:0,children:[Object(z.jsx)(se.a,{item:!0,children:"T\xe4gliches Abo (Mo-So)"}),Object(z.jsx)(se.a,{item:!0,children:Object(z.jsx)(re.a,{color:"secondary",size:"medium",checked:r,onChange:this.handleAboChange,name:"aboDailyWeekend"})}),Object(z.jsx)(se.a,{item:!0,children:"Wochenendabo (Fr+Sa)"})]})}),Object(z.jsx)("div",{className:"detailVersionList",children:Object(z.jsxs)(oe.a,{children:[Object(z.jsx)(R.a,{style:{marginBottom:"1rem"},children:Object(z.jsx)(je,{cssCardClass:b.sport,title:"SPORTVERSION",aboWeekend:r,edition:a.sport,currentPriceID:s,period:n,otherCountry:o,calcDistance:j,otherCountryDelivery:h,checkedYearly:t,getDistanceSupplement:this.getDistanceSupplement,handleVariantSelect:this.handleVariantSelect})}),Object(z.jsx)(R.a,{style:{marginBottom:"1rem"},children:Object(z.jsx)(je,{cssCardClass:b.stadt,title:"STADTAUSGABE",aboWeekend:r,edition:a.stadt,currentPriceID:s,period:n,otherCountry:o,calcDistance:j,otherCountryDelivery:h,checkedYearly:t,getDistanceSupplement:this.getDistanceSupplement,handleVariantSelect:this.handleVariantSelect})}),Object(z.jsx)(R.a,{style:{marginBottom:"1rem"},children:Object(z.jsx)(je,{cssCardClass:b.land,title:"LANDKREISINFO",aboWeekend:r,edition:a.land,currentPriceID:s,period:n,otherCountry:o,calcDistance:j,otherCountryDelivery:h,checkedYearly:t,getDistanceSupplement:this.getDistanceSupplement,handleVariantSelect:this.handleVariantSelect})})]})})]})}),Object(z.jsx)("div",{className:"landingPageContainer",children:Object(z.jsxs)(F.a,{children:[Object(z.jsx)("h2",{className:"detailVersionChapter",children:"Wann soll Ihr Abo beginnen?"}),Object(z.jsx)(le.a,{utils:ie.a,locale:ce.a,children:Object(z.jsx)(se.a,{container:!0,justifyContent:"space-around",children:Object(z.jsx)(de.a,{disableToolbar:!0,minDate:g,variant:"inline",format:"dd.MM.yyyy",margin:"normal",id:"date-picker-startDate",label:"Start des Abos:",value:p,onChange:x,KeyboardButtonProps:{"aria-label":"change date"},invalidDateMessage:"Bitte geben Sie ein Datum in folgendem Format ein: dd.MM.yyyy",minDateMessage:"Das Abo kann fr\xfchestens in zwei Tagen starten!"})})})]})}),a[l].isAvailable?Object(z.jsx)("div",{className:"landingPageContainer",children:Object(z.jsxs)(F.a,{children:[Object(z.jsx)("h2",{className:"detailVersionChapter",children:"Haben Sie noch einen Hinweis f\xfcr den Austr\xe4ger?"}),Object(z.jsx)(he.a,{children:Object(z.jsx)(be.a,{as:"textarea",placeholder:"z.B. Wo befindet sich ihr Zeitungsrohr? etc.",value:O,onChange:m,"aria-label":"With textarea"})})]})}):"",Object(z.jsx)("div",{className:"landingPageContainer",children:Object(z.jsxs)(F.a,{children:[Object(z.jsx)("h2",{className:"detailVersionChapter",children:"Wenn Sie fertig sind, dann k\xf6nnen Sie zur Kasse gehen"}),Object(z.jsx)(oe.a,{children:Object(z.jsx)(R.a,{style:{textAlign:"center"},children:Object(z.jsx)(f.a,{onClick:this.handleCheckout,variant:"success",size:"lg",children:"Zur Kasse"})})})]})})]}),Object(z.jsxs)(_.a,{show:d,onHide:this.handleClose,backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(z.jsx)(_.a.Header,{closeButton:!0,children:Object(z.jsx)(_.a.Title,{children:"Checkout"})}),Object(z.jsxs)(_.a.Body,{style:{textAlign:"center"},children:[Object(z.jsx)("p",{children:"Bitte melden Sie sich an. Wenn Sie noch keinen User haben, dann k\xf6nnen Sie sich registrieren."}),Object(z.jsx)(c.b,{to:"/anmelden",children:Object(z.jsx)(f.a,{variant:"outline-primary",style:{marginRight:"10px"},children:"Anmelden"})}),Object(z.jsx)(c.b,{to:"/registrieren",children:Object(z.jsx)(f.a,{variant:"outline-secondary",children:"Registrieren"})})]}),Object(z.jsx)(_.a.Footer,{children:Object(z.jsx)(f.a,{variant:"secondary",onClick:this.handleClose,children:"Abbrechen"})})]})]})}}]),n}(a.Component);ue.contextType=U;var pe=Object(O.g)(ue),xe=n(230),Oe=n(225),me=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.validated,n=e.handleSubmit,a=e.update,s=e.addressType;return Object(z.jsxs)(W.a,{noValidate:!0,validated:t,onSubmit:n,children:[Object(z.jsxs)(W.a.Group,{controlId:"formGridAddress2",children:[Object(z.jsx)(W.a.Control,{required:!0,disabled:a,defaultValue:this.context.user[s].street,placeholder:"Stra\xdfe"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Stra\xdfe ein."})]}),Object(z.jsxs)(W.a.Row,{children:[Object(z.jsxs)(W.a.Group,{as:R.a,controlId:"formGridCity2",children:[Object(z.jsx)(W.a.Control,{required:!0,disabled:a,defaultValue:this.context.user[s].city,name:"city",placeholder:"Stadt"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Stadt ein."})]}),Object(z.jsxs)(W.a.Group,{as:R.a,controlId:"formGridZip2",children:[Object(z.jsx)(W.a.Control,{required:!0,type:"number",disabled:a,defaultValue:this.context.user[s].plz,name:"zip",placeholder:"PLZ"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Postleitzahl ein."})]})]}),Object(z.jsx)(W.a.Group,{controlId:"formGridState2",children:Object(z.jsxs)(W.a.Control,{required:!0,name:"state",disabled:a,as:"select",defaultValue:this.context.user[s].state,children:[Object(z.jsx)("option",{children:"Deutschland"}),Object(z.jsx)("option",{children:"\xd6sterreich"}),Object(z.jsx)("option",{children:"Schweiz"}),Object(z.jsx)("option",{children:"Frankreich"})]})}),Object(z.jsx)(f.a,{variant:"primary",type:"submit",style:{width:"100%"},children:a?Object(z.jsx)(Z.a,{as:"span",animation:"border",size:"md",role:"status","aria-hidden":"true"}):"Aktualisieren"})]})}}]),n}(a.Component);me.contextType=U;var ge=me,ve=n(224),fe=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).getAboVersion=a.getAboVersion.bind(Object(u.a)(a)),a.getAboPrice=a.getAboPrice.bind(Object(u.a)(a)),a.getAboVariant=a.getAboVariant.bind(Object(u.a)(a)),a.getDeliveryMethod=a.getDeliveryMethod.bind(Object(u.a)(a)),a.getPaymentType=a.getPaymentType.bind(Object(u.a)(a)),a.handleCloseCancelAbo=a.handleCloseCancelAbo.bind(Object(u.a)(a)),a.handleCancelAbo=a.handleCancelAbo.bind(Object(u.a)(a)),a.handleCloseToast=a.handleCloseToast.bind(Object(u.a)(a)),a.state={showModalCancelAbo:!1,cancelAbo:!1,showToast:!1},a}return Object(j.a)(n,[{key:"getAboVersion",value:function(){switch(this.props.abo.localpaperversions){case 1:return"Stadtausgabe";case 2:return"Sportversion";case 3:return"Landkreisinfo"}}},{key:"getAboPrice",value:function(){var e,t;return"Annual"===this.props.abo.payment?(e=this.props.abo.calculatedyearprice,t="Jahr"):(e=this.props.abo.calculatedprice,t="Monat"),e+"\u20ac/"+t}},{key:"getAboVariant",value:function(){return"Weekend"===this.props.abo.subscriptiontype?"Wochenende":"T\xe4glich"}},{key:"getDeliveryMethod",value:function(){return"Post"===this.props.abo.deliverymethod?"Post":"Austr\xe4ger"}},{key:"getPaymentType",value:function(){return"Direct Debit"===this.props.abo.paymenttype?Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)("p",{children:["Per ",Object(z.jsx)("b",{children:"Lastschrift"})]}),Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"IBAN:"})," ",this.props.abo.IBAN]}),Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"BIC:"})," ",this.props.abo.BIC]}),Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Kontoinhaber:"})," ",this.props.abo.AccountHolder]})]}):Object(z.jsxs)("p",{children:["Per ",Object(z.jsx)("b",{children:"Rechnung"})," an hinterlegte Rechnungsadresse"]})}},{key:"handleCloseCancelAbo",value:function(){this.state.cencelAbo||this.setState({showModalCancelAbo:!1})}},{key:"handleCancelAbo",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({cancelAbo:!0}),(t=this.props.abo).endabodate=(new Date).toLocaleString().split(",")[0],e.next=5,M(this.props.abo.aboId,t);case 5:console.log("Abo storniert"),this.setState({cancelAbo:!1,showModalCancelAbo:!1,showToast:!0});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleCloseToast",value:function(){this.setState({showToast:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.abo,a=t.allowCancel,s=this.state,r=s.showModalCancelAbo,i=s.cancelAbo,c=s.showToast;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsxs)(oe.a,{children:[Object(z.jsxs)(R.a,{children:[Object(z.jsx)(X.a.Item,{children:Object(z.jsx)("h3",{children:"Aboinformationen"})}),Object(z.jsxs)(X.a.Item,{children:[Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Ausgabe:"})," ",this.getAboVersion()]}),Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Start:"})," ",n.startabodate]}),""!==n.endabodate?Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Ende:"})," ",n.endabodate]}):"",Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Preis:"})," ",this.getAboPrice()]}),Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Abonnementvariante:"})," ",this.getAboVariant()]}),Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Liefermethode:"})," ",this.getDeliveryMethod()]}),""!==n.hintDeliveryMan?Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Hinweis:"})," ",n.hintDeliveryMan]}):""]})]}),Object(z.jsxs)(R.a,{children:[Object(z.jsx)(X.a.Item,{children:Object(z.jsx)("h3",{children:"Zahlungsinformationen"})}),Object(z.jsx)(X.a.Item,{children:this.getPaymentType()})]})]}),a&&""===n.endabodate?Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("br",{}),Object(z.jsx)(oe.a,{children:Object(z.jsxs)(R.a,{children:[Object(z.jsx)(X.a.Item,{children:Object(z.jsx)("h3",{children:"Abonnement stornieren"})}),Object(z.jsxs)(X.a.Item,{children:[Object(z.jsx)("p",{children:"Wollen Sie das Abonnement stornieren?"}),Object(z.jsx)(f.a,{variant:"danger",onClick:function(){e.setState({showModalCancelAbo:!0})},children:"Abonnement stornieren"})," "]})]})})]}):"",Object(z.jsxs)(_.a,{show:r,onHide:this.handleCloseCancelAbo,backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(z.jsx)(_.a.Header,{closeButton:!0,children:Object(z.jsx)(_.a.Title,{children:"Abonnement stornieren"})}),Object(z.jsx)(_.a.Body,{style:{textAlign:"left"},children:Object(z.jsx)("p",{children:"Sind Sie sich sicher, dass Sie das Abonnement stornieren m\xf6chten?"})}),Object(z.jsxs)(_.a.Footer,{children:[Object(z.jsx)(f.a,{variant:"secondary",disabled:i,onClick:this.handleCloseCancelAbo,children:"Abbrechen"}),Object(z.jsx)(f.a,{variant:"danger",disabled:i,onClick:this.handleCancelAbo,children:i?Object(z.jsx)(Z.a,{as:"span",animation:"border",size:"md",role:"status","aria-hidden":"true"}):"Abonnement stornieren"})]})]}),Object(z.jsxs)(q.a,{className:"p-3 toastSuccess",onClose:this.handleCloseToast,position:"bottom-center",bg:"success",show:c,delay:3e3,autohide:!0,children:[Object(z.jsxs)(q.a.Header,{closeButton:!1,children:[Object(z.jsx)(ve.a,{style:{marginRight:"0.4rem"}}),Object(z.jsx)("strong",{className:"me-auto",children:"Erfolgreich"})]}),Object(z.jsx)(q.a.Body,{children:"Sie haben Ihr Abo erfolgreich storniert!"})]})]})}}]),n}(a.Component),ye=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).handleTabChange=a.handleTabChange.bind(Object(u.a)(a)),a.handlePaymentChange=a.handlePaymentChange.bind(Object(u.a)(a)),a.handleLastschriftInfoChange=a.handleLastschriftInfoChange.bind(Object(u.a)(a)),a.openModal=a.openModal.bind(Object(u.a)(a)),a.handleClose=a.handleClose.bind(Object(u.a)(a)),a.handleCheckoutAbo=a.handleCheckoutAbo.bind(Object(u.a)(a)),a.handleTabChangeDirectDebit=a.handleTabChangeDirectDebit.bind(Object(u.a)(a)),a.handleCloseDelAddress=a.handleCloseDelAddress.bind(Object(u.a)(a)),a.handleUserUpdate=a.handleUserUpdate.bind(Object(u.a)(a)),a.handleCloseDelAddressToastSuccess=a.handleCloseDelAddressToastSuccess.bind(Object(u.a)(a)),a.handleCloseDelAddressToastError=a.handleCloseDelAddressToastError.bind(Object(u.a)(a)),a.openChangeDelAddress=a.openChangeDelAddress.bind(Object(u.a)(a)),a.getAbo=a.getAbo.bind(Object(u.a)(a)),a.formDataSec=s.a.createRef(),a.formIBAN=s.a.createRef(),a.state={key:"#1",lastschrift:!1,IBAN:"",BIC:"",AccountHolder:"",showModal:!1,validatedDataSecurity:!1,validatedIBAN:!1,saving:!1,showModalDelAddress:!1,updateDelAddress:!1,validatedDelAddress:!1,showDelAddressToastSuccess:!1,showDelAddressToastError:!1,isLoading:!0},a}return Object(j.a)(n,[{key:"componentDidMount",value:function(){if(this.context.user)this.setState({AccountHolder:this.context.user.firstname+" "+this.context.user.lastname,isLoading:!1});else{var e=this;k.onAuthStateChanged((function(t){t&&e.setState({isLoading:!1,AccountHolder:this.context.user.firstname+" "+this.context.user.lastname})}))}}},{key:"handleTabChange",value:function(e){this.setState({key:e})}},{key:"handleTabChangeDirectDebit",value:function(e){this.state.lastschrift?(this.setState({validatedIBAN:!0}),!0===this.formIBAN.current.checkValidity()&&this.handleTabChange(e)):this.handleTabChange(e)}},{key:"handlePaymentChange",value:function(){this.setState((function(e){return{lastschrift:!e.lastschrift}}))}},{key:"handleLastschriftInfoChange",value:function(e){var t=e.target.name,n=e.target.value;switch(t){case"IBAN":this.setState({IBAN:n});break;case"BIC":this.setState({BIC:n});break;case"AccountHolder":this.setState({AccountHolder:n})}}},{key:"openModal",value:function(){this.setState({showModal:!0})}},{key:"handleClose",value:function(){this.state.saving||this.setState({showModal:!1})}},{key:"handleCloseDelAddress",value:function(){this.state.saving||this.setState({showModalDelAddress:!1})}},{key:"handleCloseDelAddressToastSuccess",value:function(){this.setState({showDelAddressToastSuccess:!1})}},{key:"handleCloseDelAddressToastError",value:function(){this.setState({showDelAddressToastError:!1})}},{key:"handleCheckoutAbo",value:function(){var e=Object(h.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({validatedDataSecurity:!0}),!0!==this.formDataSec.current.checkValidity()){e.next=13;break}return this.setState({saving:!0}),(t=this.props.abo).dataprivacyaccepted=!0,t.paymenttype=this.state.lastschrift?"Direct Debit":"Invoice",t.userId=this.context.user.uid,this.state.lastschrift&&(t.iban=this.state.IBAN,t.bic=this.state.BIC,t.AccountHolder=this.state.AccountHolder),e.next=10,N(t);case 10:this.setState({saving:!1}),this.props.clearAbo(),this.props.history.push("/checkout");case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleUserUpdate",value:function(){var e=Object(h.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.setState({validatedDelAddress:!0}),!1!==(n=t.currentTarget).checkValidity()){e.next=7;break}t.stopPropagation(),e.next=16;break;case 7:return this.setState({updateDelAddress:!0}),(a={}).street=n[0].value,a.city=n[1].value,a.plz=n[2].value,a.state=n[3].value,e.next=15,this.props.onCustomerUpdate({billingAddress:a});case 15:this.setState({showModalDelAddress:!1,updateDelAddress:!1,showDelAddressToastSuccess:!0,validatedDelAddress:!1});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"openChangeDelAddress",value:function(){this.setState({showModalDelAddress:!0})}},{key:"getAbo",value:function(){var e=this.props.abo;return e.paymenttype=this.state.lastschrift?"Direct Debit":"Invoice",this.state.lastschrift&&(e.IBAN=this.state.IBAN,e.BIC=this.state.BIC,e.AccountHolder=this.state.AccountHolder),e}},{key:"render",value:function(){var e=this,t=this.state,n=t.key,a=t.lastschrift,s=t.IBAN,r=t.BIC,i=t.AccountHolder,c=t.showModal,l=t.validatedDataSecurity,d=t.validatedIBAN,o=t.saving,h=t.showModalDelAddress,b=t.updateDelAddress,j=t.validatedDelAddress,u=t.showDelAddressToastSuccess,p=t.showDelAddressToastError,x=t.isLoading;return Object(z.jsx)(z.Fragment,{children:x?Object(z.jsx)(F.a,{children:Object(z.jsx)(oe.a,{children:Object(z.jsx)(R.a,{style:{textAlign:"center"},children:Object(z.jsx)(Z.a,{className:"loadingSpinner",animation:"border",variant:"info"})})})}):Object(z.jsxs)("div",{className:"landingPageContainer",children:[Object(z.jsxs)(F.a,{children:[Object(z.jsx)("h2",{className:"detailVersionChapter",children:"Sie haben es gleich geschafft!"}),Object(z.jsxs)(xe.a,{activeKey:n,id:"checkout-tabs",className:"mb-3",children:[Object(z.jsxs)(Oe.a,{tabClassName:"tabCheckout",eventKey:"#1",title:"Rechnungsadresse",children:[Object(z.jsx)(f.a,{className:"btnEditAddress",onClick:this.openChangeDelAddress,variant:"primary",children:"Rechnungsadresse bearbeiten"}),Object(z.jsxs)(W.a,{children:[Object(z.jsxs)(W.a.Group,{controlId:"formGridAddress2",children:[Object(z.jsx)(W.a.Control,{required:!0,disabled:!0,value:this.context.user.billingAddress.street,onChange:function(){},placeholder:"Stra\xdfe"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Stra\xdfe ein."})]}),Object(z.jsxs)(W.a.Row,{children:[Object(z.jsxs)(W.a.Group,{as:R.a,controlId:"formGridCity2",children:[Object(z.jsx)(W.a.Control,{required:!0,disabled:!0,value:this.context.user.billingAddress.city,name:"city",onChange:function(){},placeholder:"Stadt"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Stadt ein."})]}),Object(z.jsxs)(W.a.Group,{as:R.a,controlId:"formGridZip2",children:[Object(z.jsx)(W.a.Control,{required:!0,type:"number",disabled:!0,onChange:function(){},value:this.context.user.billingAddress.plz,name:"zip",placeholder:"PLZ"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Postleitzahl ein."})]})]}),Object(z.jsx)(W.a.Group,{controlId:"formGridState2",children:Object(z.jsxs)(W.a.Control,{required:!0,name:"state",disabled:!0,as:"select",onChange:function(){},value:this.context.user.billingAddress.state,children:[Object(z.jsx)("option",{children:"Deutschland"}),Object(z.jsx)("option",{children:"\xd6sterreich"}),Object(z.jsx)("option",{children:"Schweiz"}),Object(z.jsx)("option",{children:"Frankreich"})]})})]}),Object(z.jsx)(f.a,{variant:"outline-primary",onClick:function(){return e.handleTabChange("#2")},children:"Weiter"})]}),Object(z.jsxs)(Oe.a,{tabClassName:"tabCheckout",eventKey:"#2",title:"Zahlungsinformationen",children:[Object(z.jsx)(ae.a,{component:"div",children:Object(z.jsxs)(se.a,{component:"label",container:!0,alignItems:"center",justifyContent:"center",spacing:0,children:[Object(z.jsx)(se.a,{item:!0,children:"Rechnung"}),Object(z.jsx)(se.a,{item:!0,children:Object(z.jsx)(re.a,{color:"secondary",size:"medium",checked:a,onChange:this.handlePaymentChange,name:"aboDailyWeekend"})}),Object(z.jsx)(se.a,{item:!0,children:"Lastschrift"})]})}),a?Object(z.jsxs)(W.a,{noValidate:!0,validated:d,ref:this.formIBAN,children:[Object(z.jsxs)(W.a.Group,{controlId:"formGridIBAN",children:[Object(z.jsx)(W.a.Control,{name:"IBAN",value:s,onChange:this.handleLastschriftInfoChange,required:!0,placeholder:"IBAN"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre IBAN ein."})]}),Object(z.jsxs)(W.a.Group,{controlId:"formGridBIC",children:[Object(z.jsx)(W.a.Control,{name:"BIC",value:r,onChange:this.handleLastschriftInfoChange,required:!0,placeholder:"BIC"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre BIC ein."})]}),Object(z.jsxs)(W.a.Group,{controlId:"formGridAccountHolder",children:[Object(z.jsx)(W.a.Control,{name:"AccountHolder",value:i,onChange:this.handleLastschriftInfoChange,required:!0,placeholder:"Kontoinhalber"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie den Kontoinhaber ein."})]})]}):"",Object(z.jsx)(f.a,{variant:"outline-secondary",style:{marginRight:"10px"},onClick:function(){return e.handleTabChange("#1")},children:"Zur\xfcck"}),Object(z.jsx)(f.a,{variant:"outline-primary",onClick:function(){return e.handleTabChangeDirectDebit("#3")},children:"Weiter"})]}),Object(z.jsxs)(Oe.a,{tabClassName:"tabCheckout",eventKey:"#3",title:"\xdcbersicht",children:[Object(z.jsxs)(oe.a,{children:[Object(z.jsxs)(R.a,{children:[Object(z.jsx)(X.a.Item,{children:Object(z.jsx)("h3",{children:"Kundeninformationen"})}),Object(z.jsxs)(X.a.Item,{children:[Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Anrede:"})," ",this.context.user.titleAddress]}),Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Vorname:"})," ",this.context.user.firstname]}),Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Nachname:"})," ",this.context.user.lastname]}),Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Firmenname:"})," ",this.context.user.companyname]}),Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"E-Mail:"})," ",this.context.user.email]}),Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Phone:"})," ",this.context.user.phone]})]})]}),Object(z.jsxs)(R.a,{children:[Object(z.jsx)(X.a.Item,{children:Object(z.jsx)("h3",{children:"Adresse"})}),Object(z.jsxs)(X.a.Item,{children:[Object(z.jsx)("p",{children:Object(z.jsx)("b",{children:"Lieferadresse:"})}),Object(z.jsx)("p",{children:this.context.user.deliveryAddress.street}),Object(z.jsx)("p",{children:this.context.user.deliveryAddress.city+" "+this.context.user.deliveryAddress.plz}),Object(z.jsx)("p",{children:this.context.user.deliveryAddress.state})]}),Object(z.jsxs)(X.a.Item,{children:[Object(z.jsx)("p",{children:Object(z.jsx)("b",{children:"Rechnungsadresse:"})}),Object(z.jsx)("p",{children:this.context.user.billingAddress.street}),Object(z.jsx)("p",{children:this.context.user.billingAddress.city+" "+this.context.user.billingAddress.plz}),Object(z.jsx)("p",{children:this.context.user.billingAddress.state})]})]})]}),Object(z.jsx)("br",{}),Object(z.jsx)(fe,{abo:this.getAbo(),allowCancel:!1}),Object(z.jsx)("br",{}),Object(z.jsx)(f.a,{variant:"outline-secondary",style:{marginRight:"10px"},onClick:function(){return e.handleTabChange("#2")},children:"Zur\xfcck"}),Object(z.jsx)(f.a,{variant:"outline-primary",onClick:this.openModal,children:"Fertig"})]})]})]}),Object(z.jsxs)(_.a,{show:c,onHide:this.handleClose,backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(z.jsx)(_.a.Header,{closeButton:!0,children:Object(z.jsx)(_.a.Title,{children:"Checkout"})}),Object(z.jsxs)(_.a.Body,{style:{textAlign:"center"},children:[Object(z.jsx)("p",{children:"M\xf6chten Sie das Abo verbindlich bestellen?"}),Object(z.jsx)(W.a,{noValidate:!0,validated:l,ref:this.formDataSec,children:Object(z.jsx)(W.a.Group,{children:Object(z.jsxs)(W.a.Check,{children:[Object(z.jsx)(W.a.Check.Input,{disabled:o,required:!0}),Object(z.jsx)(W.a.Check.Label,{children:"Ich akzeptiere die Datenschatzbestimmungen"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Sie m\xfcssen dem Datenschutz zustimmen!"})]})})})]}),Object(z.jsxs)(_.a.Footer,{children:[Object(z.jsx)(f.a,{variant:"secondary",disabled:o,onClick:this.handleClose,children:"Abbrechen"}),Object(z.jsx)(f.a,{variant:"primary",disabled:o,onClick:this.handleCheckoutAbo,children:o?Object(z.jsx)(Z.a,{as:"span",animation:"border",size:"md",role:"status","aria-hidden":"true"}):"Bestellen"})]})]}),Object(z.jsxs)(_.a,{show:h,onHide:this.handleCloseDelAddress,backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(z.jsx)(_.a.Header,{closeButton:!0,children:Object(z.jsx)(_.a.Title,{children:"Rechnungsadresse aktualisieren"})}),Object(z.jsx)(_.a.Body,{style:{textAlign:"center"},children:Object(z.jsx)(ge,{validated:j,handleSubmit:this.handleUserUpdate,update:b,addressType:"billingAddress"})}),Object(z.jsx)(_.a.Footer,{children:Object(z.jsx)(f.a,{variant:"secondary",disabled:o,onClick:this.handleCloseDelAddress,children:"Abbrechen"})})]}),Object(z.jsxs)(q.a,{className:"p-3 toastSuccess",onClose:this.handleCloseDelAddressToastSuccess,position:"bottom-center",bg:"success",show:u,delay:3e3,autohide:!0,children:[Object(z.jsxs)(q.a.Header,{closeButton:!1,children:[Object(z.jsx)(ve.a,{style:{marginRight:"0.4rem"}}),Object(z.jsx)("strong",{className:"me-auto",children:"Erfolgreich"})]}),Object(z.jsx)(q.a.Body,{children:"Ihre Rechnungsadresse wurde erfolgreich aktualisiert!"})]}),Object(z.jsxs)(q.a,{className:"p-3 toastError",onClose:this.handleCloseDelAddressToastError,position:"bottom-center",show:p,delay:3e3,autohide:!0,children:[Object(z.jsxs)(q.a.Header,{closeButton:!1,children:[Object(z.jsx)(ve.a,{style:{marginRight:"0.4rem"}}),Object(z.jsx)("strong",{className:"me-auto",children:"Fehlgeschlagen"})]}),Object(z.jsx)(q.a.Body,{children:"Ihre Rechnungsadresse wurde leider nicht aktualisiert. Bitte versuchen Sie es sp\xe4ter erneut!"})]})]})})}}]),n}(a.Component);ye.contextType=U;var Ae=Object(O.g)(ye),Ce=n(226),ke=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(){return Object(b.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.validated,n=e.handleSubmit,a=e.update;return Object(z.jsxs)(W.a,{noValidate:!0,validated:t,onSubmit:n,children:[Object(z.jsx)(W.a.Group,{controlId:"formCompanyName",children:Object(z.jsx)(W.a.Control,{disabled:a,defaultValue:this.context.user.companyname,name:"companyName",placeholder:"Firmenname"})}),Object(z.jsx)(W.a.Group,{controlId:"formAnrede",children:Object(z.jsxs)(W.a.Control,{disabled:a,defaultValue:this.context.user.titleAddress,required:!0,as:"select",children:[Object(z.jsx)("option",{children:"Herr"}),Object(z.jsx)("option",{children:"Frau"})]})}),Object(z.jsxs)(W.a.Row,{children:[Object(z.jsxs)(W.a.Group,{as:R.a,controlId:"formFirstName",children:[Object(z.jsx)(W.a.Control,{disabled:a,defaultValue:this.context.user.firstname,required:!0,name:"firstName",placeholder:"Vorname"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihren Vornamen ein."})]}),Object(z.jsxs)(W.a.Group,{as:R.a,controlId:"formLastName",children:[Object(z.jsx)(W.a.Control,{disabled:a,defaultValue:this.context.user.lastname,required:!0,name:"lastName",placeholder:"Nachname"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihren Nachnamen ein."})]})]}),Object(z.jsxs)(W.a.Group,{controlId:"formBasicEmail",children:[Object(z.jsx)(W.a.Control,{disabled:a,defaultValue:this.context.user.email,required:!0,type:"email",placeholder:"E-Mail-Adresse"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre E-Mail-Adresse ein."})]}),Object(z.jsxs)(W.a.Group,{controlId:"formBasicPhone",children:[Object(z.jsx)(W.a.Control,{disabled:a,defaultValue:this.context.user.phone,required:!0,type:"number",placeholder:"Telefonnummer"}),Object(z.jsx)(W.a.Control.Feedback,{type:"invalid",children:"Bitte geben Sie Ihre Telefonnummer ein."})]}),Object(z.jsx)(f.a,{variant:"primary",type:"submit",style:{width:"100%"},children:a?Object(z.jsx)(Z.a,{as:"span",animation:"border",size:"md",role:"status","aria-hidden":"true"}):"Aktualisieren"})]})}}]),n}(a.Component);ke.contextType=U;var Se=ke,De=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).handleUserUpdate=a.handleUserUpdate.bind(Object(u.a)(a)),a.handleCloseBilAddress=a.handleCloseBilAddress.bind(Object(u.a)(a)),a.handleCloseDelAddress=a.handleCloseDelAddress.bind(Object(u.a)(a)),a.handleCloseUser=a.handleCloseUser.bind(Object(u.a)(a)),a.handleCloseDeleteUser=a.handleCloseDeleteUser.bind(Object(u.a)(a)),a.handleDeleteUser=a.handleDeleteUser.bind(Object(u.a)(a)),a.state={showModalBilAddress:!1,validatedBilAddress:!1,updateBilAddress:!1,showModalDelAddress:!1,validatedDelAddress:!1,updateDelAddress:!1,showModalUser:!1,validateUser:!1,updateUser:!1,showModalDeleteUser:!1,deleteUser:!1},a}return Object(j.a)(n,[{key:"handleUserUpdate",value:function(){var e=Object(h.a)(d.a.mark((function e(t,n){var a,s,r,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),!1===(a=t.currentTarget).checkValidity()&&t.stopPropagation(),e.t0=n,e.next="del"===e.t0?6:"bil"===e.t0?19:"user"===e.t0?32:47;break;case 6:if(this.setState({validatedDelAddress:!0}),!1!==!a.checkValidity()){e.next=18;break}return this.setState({updateDelAddress:!0}),(s=this.context.user).deliveryAddress.street=a[0].value,s.deliveryAddress.city=a[1].value,s.deliveryAddress.plz=a[2].value,s.deliveryAddress.state=a[3].value,e.next=16,this.props.onCustomerUpdate(s);case 16:console.info("User updated"),this.setState({showModalDelAddress:!1,updateDelAddress:!1,validatedDelAddress:!1});case 18:return e.abrupt("break",47);case 19:if(this.setState({validatedBilAddress:!0}),!1!==!a.checkValidity()){e.next=31;break}return this.setState({updateBilAddress:!0}),(r=this.context.user).billingAddress.street=a[0].value,r.billingAddress.city=a[1].value,r.billingAddress.plz=a[2].value,r.billingAddress.state=a[3].value,e.next=29,this.props.onCustomerUpdate(r);case 29:console.info("User updated"),this.setState({showModalBilAddress:!1,updateBilAddress:!1,validatedBilAddress:!1});case 31:return e.abrupt("break",47);case 32:if(this.setState({validatedUser:!0}),!1!==!a.checkValidity()){e.next=46;break}return this.setState({updateUser:!0}),(i=this.context.user).companyname=a[0].value,i.titleAddress=a[1].value,i.firstname=a[2].value,i.lastname=a[3].value,i.email=a[4].value,i.phone=a[5].value,e.next=44,this.props.onCustomerUpdate(i);case 44:console.info("User updated"),this.setState({showModalUser:!1,updateUser:!1,validatedUser:!1});case 46:return e.abrupt("break",47);case 47:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleCloseBilAddress",value:function(){this.state.updateBilAddress||this.setState({showModalBilAddress:!1})}},{key:"handleCloseDelAddress",value:function(){this.state.updateDelAddress||this.setState({showModalDelAddress:!1})}},{key:"handleCloseUser",value:function(){this.state.updateUser||this.setState({showModalUser:!1})}},{key:"handleCloseDeleteUser",value:function(){this.state.deleteUser||this.setState({showModalDeleteUser:!1})}},{key:"handleDeleteUser",value:function(){var e=this;this.setState({deleteUser:!0}),this.props.onCustomerDelete().then((function(){console.log("User deleted"),e.setState({showModalDeleteUser:!1,deleteUser:!1})})).catch((function(t){console.log("There was an error:"+t),e.setState({showModalDeleteUser:!1,deleteUser:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.showModalBilAddress,a=t.validatedBilAddress,s=t.updateBilAddress,r=t.showModalDelAddress,i=t.validatedDelAddress,c=t.updateDelAddress,l=t.showModalUser,d=t.validateUser,o=t.updateUser,h=t.showModalDeleteUser,b=t.deleteUser;return Object(z.jsxs)(F.a,{children:[Object(z.jsx)(oe.a,{children:Object(z.jsxs)(R.a,{children:[Object(z.jsxs)(X.a.Item,{children:[Object(z.jsx)("h3",{style:{float:"left"},children:"Benutzerdaten"}),Object(z.jsx)(f.a,{variant:"info",className:"btnEditUserData",onClick:function(){e.setState({showModalUser:!0})},children:Object(z.jsx)(Ce.a,{style:{color:"white",fontSize:"1.5rem"}})})," "]}),Object(z.jsxs)(X.a.Item,{children:[Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Anrede:"})," ",this.context.user.titleAddress]}),Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Vorname:"})," ",this.context.user.firstname]}),Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Nachname:"})," ",this.context.user.lastname]}),Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Firmenname:"})," ",this.context.user.companyname]}),Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"E-Mail:"})," ",this.context.user.email]}),Object(z.jsxs)("p",{children:[Object(z.jsx)("b",{children:"Phone:"})," ",this.context.user.phone]})]})]})}),Object(z.jsx)("br",{}),Object(z.jsxs)(oe.a,{children:[Object(z.jsxs)(R.a,{children:[Object(z.jsxs)(X.a.Item,{children:[Object(z.jsx)("h3",{style:{float:"left"},children:"Lieferadresse"}),Object(z.jsx)(f.a,{variant:"info",className:"btnEditUserData",onClick:function(){e.setState({showModalDelAddress:!0})},children:Object(z.jsx)(Ce.a,{style:{color:"white",fontSize:"1.5rem"}})})," "]}),Object(z.jsxs)(X.a.Item,{children:[Object(z.jsx)("p",{children:this.context.user.deliveryAddress.street}),Object(z.jsx)("p",{children:this.context.user.deliveryAddress.city+" "+this.context.user.deliveryAddress.plz}),Object(z.jsx)("p",{children:this.context.user.deliveryAddress.state})]})]}),Object(z.jsxs)(R.a,{children:[Object(z.jsxs)(X.a.Item,{children:[Object(z.jsx)("h3",{style:{float:"left"},children:"Rechnungsadresse"}),Object(z.jsx)(f.a,{variant:"info",className:"btnEditUserData",onClick:function(){e.setState({showModalBilAddress:!0})},children:Object(z.jsx)(Ce.a,{style:{color:"white",fontSize:"1.5rem"}})})," "]}),Object(z.jsxs)(X.a.Item,{children:[Object(z.jsx)("p",{children:this.context.user.billingAddress.street}),Object(z.jsx)("p",{children:this.context.user.billingAddress.city+" "+this.context.user.billingAddress.plz}),Object(z.jsx)("p",{children:this.context.user.billingAddress.state})]})]})]}),Object(z.jsx)("br",{}),Object(z.jsx)(oe.a,{children:Object(z.jsxs)(R.a,{children:[Object(z.jsx)(X.a.Item,{children:Object(z.jsx)("h3",{children:"Benutzer l\xf6schen"})}),Object(z.jsxs)(X.a.Item,{children:[Object(z.jsx)("p",{children:"Auf Ihren Wunsch werden wir ihre Benutzerdaten l\xf6schen!"}),Object(z.jsx)(f.a,{variant:"danger",onClick:function(){e.setState({showModalDeleteUser:!0})},children:"Benutzer l\xf6schen"})," "]})]})}),Object(z.jsxs)(_.a,{show:n,onHide:this.handleCloseBilAddress,backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(z.jsx)(_.a.Header,{closeButton:!0,children:Object(z.jsx)(_.a.Title,{children:"Rechnungsadresse aktualisieren"})}),Object(z.jsx)(_.a.Body,{style:{textAlign:"center"},children:Object(z.jsx)(ge,{validated:a,handleSubmit:function(t){return e.handleUserUpdate(t,"bil")},update:s,addressType:"billingAddress"})}),Object(z.jsx)(_.a.Footer,{children:Object(z.jsx)(f.a,{variant:"secondary",disabled:s,onClick:this.handleCloseBilAddress,children:"Abbrechen"})})]}),Object(z.jsxs)(_.a,{show:r,onHide:this.handleCloseDelAddress,backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(z.jsx)(_.a.Header,{closeButton:!0,children:Object(z.jsx)(_.a.Title,{children:"Lieferadresse aktualisieren"})}),Object(z.jsx)(_.a.Body,{style:{textAlign:"center"},children:Object(z.jsx)(ge,{validated:i,handleSubmit:function(t){return e.handleUserUpdate(t,"del")},update:c,addressType:"deliveryAddress"})}),Object(z.jsx)(_.a.Footer,{children:Object(z.jsx)(f.a,{variant:"secondary",disabled:c,onClick:this.handleCloseDelAddress,children:"Abbrechen"})})]}),Object(z.jsxs)(_.a,{show:l,onHide:this.handleCloseUser,backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(z.jsx)(_.a.Header,{closeButton:!0,children:Object(z.jsx)(_.a.Title,{children:"Benutzerdaten aktualisieren"})}),Object(z.jsx)(_.a.Body,{style:{textAlign:"center"},children:Object(z.jsx)(Se,{validated:d,handleSubmit:function(t){return e.handleUserUpdate(t,"user")},update:o})}),Object(z.jsx)(_.a.Footer,{children:Object(z.jsx)(f.a,{variant:"secondary",disabled:o,onClick:this.handleCloseUser,children:"Abbrechen"})})]}),Object(z.jsxs)(_.a,{show:h,onHide:this.handleCloseDeleteUser,backdrop:"static",size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(z.jsx)(_.a.Header,{closeButton:!0,children:Object(z.jsx)(_.a.Title,{children:"Benutzer l\xf6schen"})}),Object(z.jsxs)(_.a.Body,{style:{textAlign:"left"},children:[Object(z.jsx)("span",{children:"Sind Sie sich sicher? Diese Option l\xe4sst sich nicht r\xfcckg\xe4ngig machen!"}),Object(z.jsx)("p",{style:{fontSize:"12px"},className:"text-muted",children:"Beachte, dass dies nur Ihre Benutzerdaten l\xf6scht. Ihre abgeschlossenen Abos bleiben aus steuerlichen Gr\xfcnden bestehen!"})]}),Object(z.jsxs)(_.a.Footer,{children:[Object(z.jsx)(f.a,{variant:"secondary",disabled:b,onClick:this.handleCloseDeleteUser,children:"Abbrechen"}),Object(z.jsx)(f.a,{variant:"danger",disabled:b,onClick:this.handleDeleteUser,children:b?Object(z.jsx)(Z.a,{as:"span",animation:"border",size:"md",role:"status","aria-hidden":"true"}):"Benutzer endg\xfcltig l\xf6schen"})]})]})]})}}]),n}(a.Component);De.contextType=U;var Ie=De,we=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).state={isLoading:!0,abos:{}},a}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e,t=this;(e=this.context.user.uid,new Promise((function(t,n){e||n("UserID not provided"),S.collection("abos").where("userId","==",e).get().then((function(e){var n=[];e.forEach((function(e){n.push(Object(o.a)({aboId:e.id},e.data()))})),t(n)})).catch((function(e){n(e)}))}))).then((function(e){console.log("Abos geladen"),t.setState({isLoading:!1,abos:e})})).catch((function(e){console.error("Error while trying to get the Abos for user "+t.context.user.uid+" Error: ",e)}))}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.abos;return Object(z.jsx)(z.Fragment,{children:t?Object(z.jsx)(F.a,{children:Object(z.jsx)(oe.a,{children:Object(z.jsx)(R.a,{style:{textAlign:"center"},children:Object(z.jsx)(Z.a,{className:"loadingSpinner",animation:"border",variant:"info"})})})}):n.map((function(e,t){return Object(z.jsx)("div",{className:"landingPageContainer",children:Object(z.jsxs)(F.a,{children:[Object(z.jsxs)("h2",{children:["Abonnement ",t+1]}),Object(z.jsx)("br",{}),Object(z.jsx)(fe,{abo:e,allowCancel:!0})]})},e.aboId)}))})}}]),n}(a.Component);we.contextType=U;var Be=we,Ne=function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).handleClose=a.handleClose.bind(Object(u.a)(a)),a.state={show:!1},a}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.props.showToast&&this.setState({show:!0})}},{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var e=this,t=this.state.show;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)("div",{className:"landingPageContainer",children:Object(z.jsxs)(F.a,{children:[Object(z.jsx)(E.a,{alt:"logo",src:y,width:"50%",className:"d-block align-top",style:{marginRight:"auto",marginLeft:"auto"},fluid:!0})," "]})}),Object(z.jsx)("div",{className:"landingPageContainer",children:Object(z.jsxs)(F.a,{style:{textAlign:"center"},children:[Object(z.jsxs)("h1",{children:["Vielen Dank ",this.context.user.titleAddress+" "+this.context.user.firstname+" "+this.context.user.lastname,"!"]}),Object(z.jsx)("p",{children:"Sie haben Ihr Abonnement erfolgreich abgeschlossen. Herzlichen Dank an Ihrem Vertrauen."})]})}),Object(z.jsx)("div",{className:"landingPageContainer",children:Object(z.jsxs)(F.a,{children:[Object(z.jsx)("h1",{children:"M\xf6chten sie noch etwas tun?"}),Object(z.jsx)("p",{children:"Zur\xfcck zur Startseite:"}),Object(z.jsx)("p",{children:Object(z.jsx)(f.a,{variant:"outline-info",onClick:function(){e.props.history.push("/")},children:"Zur Startseite"})}),Object(z.jsx)("p",{children:"Ihre Daten k\xf6nnen Sie im Benutzerprofil einsehen und \xe4ndern:"}),Object(z.jsx)("p",{children:Object(z.jsx)(f.a,{variant:"outline-success",onClick:function(){e.props.history.push("/benutzerprofil")},children:"Zum Benutzerprofil"})}),Object(z.jsxs)("p",{children:["Einen \xdcberblick \xfcber Ihre abgeschlossenen Abonnements finden Sie hier.",Object(z.jsx)("br",{}),"Ebenfalls k\xf6nnen Sie ganz gem\xfctlich ein Abonnement \xfcber das Abonnement Menu stornieren."]}),Object(z.jsx)("p",{children:Object(z.jsx)(f.a,{variant:"outline-warning",onClick:function(){e.props.history.push("/abonnements")},children:"Zu Ihren Abonnements"})})]})}),Object(z.jsxs)(q.a,{className:"p-3 toastSuccess",onClose:this.handleClose,position:"bottom-center",bg:"success",show:t,delay:3e3,autohide:!0,children:[Object(z.jsxs)(q.a.Header,{closeButton:!1,children:[Object(z.jsx)(ve.a,{style:{marginRight:"0.4rem"}}),Object(z.jsx)("strong",{className:"me-auto",children:"Erfolgreich"})]}),Object(z.jsx)(q.a.Body,{children:"Sie haben Ihr Abo erfolgreich abgeschlossen!"})]})]})}}]),n}(a.Component);Ne.contextType=U;var Me=Object(O.g)(Ne),Te=n(130);var ze=function(e){var t=e.component,n=Object(Te.a)(e,["component"]);return Object(z.jsx)(U.Consumer,{children:function(e){return Object(z.jsx)(O.b,Object(o.a)(Object(o.a)({},n),{},{render:function(a){return e.user?Object(z.jsx)(t,Object(o.a)({},n)):Object(z.jsx)(O.a,{to:{pathname:"/",state:{from:a.location}}})}}))}})};var Ue=function(e){var t=e.component,n=e.deliveryAddress,a=Object(Te.a)(e,["component","deliveryAddress"]);return Object(z.jsx)(U.Consumer,{children:function(e){return Object(z.jsx)(O.b,Object(o.a)(Object(o.a)({},a),{},{render:function(s){return e.user||n?Object(z.jsx)(t,Object(o.a)(Object(o.a)({},a),{},{deliveryAddress:n})):Object(z.jsx)(O.a,{to:{pathname:"/",state:{from:s.location}}})}}))}})},Le=(n(186),function(e){Object(p.a)(n,e);var t=Object(x.a)(n);function n(e){var a;return Object(b.a)(this,n),(a=t.call(this,e)).handleLogIn=a.handleLogIn.bind(Object(u.a)(a)),a.handleLogOut=a.handleLogOut.bind(Object(u.a)(a)),a.changeDeliveryAddress=a.changeDeliveryAddress.bind(Object(u.a)(a)),a.handleStartDateChange=a.handleStartDateChange.bind(Object(u.a)(a)),a.handleChangeHint=a.handleChangeHint.bind(Object(u.a)(a)),a.onAboCreate=a.onAboCreate.bind(Object(u.a)(a)),a.onCustomerUpdate=a.onCustomerUpdate.bind(Object(u.a)(a)),a.clearAbo=a.clearAbo.bind(Object(u.a)(a)),a.onCustomerDelete=a.onCustomerDelete.bind(Object(u.a)(a)),a.getMinDate=a.getMinDate.bind(Object(u.a)(a)),a.state={tempDeliveryAddress:{},startDate:a.getMinDate(),hint:"",abo:{}},a}return Object(j.a)(n,[{key:"getMinDate",value:function(){var e=new Date;return e.setDate(e.getDate()+2),e}},{key:"handleLogIn",value:function(){0===Object.keys(this.state.abo).length&&this.state.abo.constructor===Object?this.props.history.push("/"):this.props.history.push("/konfigurator/checkout")}},{key:"handleLogOut",value:function(){return this.setState({tempDeliveryAddress:{},abo:{},startDate:this.getMinDate(),hint:""}),k.signOut().then(this.props.history.push("/")).catch((function(e){return console.error("Error during signout",e)})),null}},{key:"changeDeliveryAddress",value:function(){var e=Object(h.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.context.user){e.next=6;break}return n=Object(o.a)(Object(o.a)({},this.context.user.deliveryAddress),t),e.next=4,this.onCustomerUpdate({deliveryAddress:n});case 4:e.next=7;break;case 6:this.setState({tempDeliveryAddress:t});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onCustomerUpdate",value:function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(this.context.user,t);case 2:return e.next=4,this.context.updateUser();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onCustomerDelete",value:function(){return new Promise((function(e,t){var n=k.currentUser;n.delete().then(Object(h.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B(n);case 2:e();case 3:case"end":return t.stop()}}),t)})))).catch((function(e){t(e)}))}))}},{key:"handleStartDateChange",value:function(e){this.setState({startDate:e})}},{key:"handleChangeHint",value:function(e){this.setState({hint:e.target.value})}},{key:"onAboCreate",value:function(e){this.setState({abo:e})}},{key:"clearAbo",value:function(){this.setState({abo:{},startDate:this.getMinDate(),hint:""})}},{key:"render",value:function(){var e=this.state,t=e.startDate,n=e.hint,a=e.abo,s=e.tempDeliveryAddress;return Object(z.jsxs)(z.Fragment,{children:[Object(z.jsx)(P,{}),Object(z.jsxs)(O.d,{children:[Object(z.jsx)(O.b,{exact:!0,path:"/konfigurator",children:Object(z.jsx)(ne,{changeDeliveryAddress:this.changeDeliveryAddress})}),Object(z.jsx)(Ue,{exact:!0,path:"/konfigurator/detail",deliveryAddress:s,component:pe,startDate:t,handleStartDateChange:this.handleStartDateChange,hint:n,handleChangeHint:this.handleChangeHint,onAboCreate:this.onAboCreate}),Object(z.jsx)(ze,{exact:!0,path:"/konfigurator/checkout",component:Ae,abo:a,onCustomerUpdate:this.onCustomerUpdate,clearAbo:this.clearAbo}),Object(z.jsx)(ze,{exact:!0,path:"/checkout",component:Me,showToast:!0}),Object(z.jsx)(ze,{exact:!0,path:"/benutzerprofil",component:Ie,onCustomerUpdate:this.onCustomerUpdate,onCustomerDelete:this.onCustomerDelete}),Object(z.jsx)(ze,{exact:!0,path:"/abonnements",component:Be}),Object(z.jsx)(O.b,{exact:!0,path:"/anmelden",children:Object(z.jsx)(J,{handleLogIn:this.handleLogIn})}),Object(z.jsx)(O.b,{exact:!0,path:"/registrieren",children:Object(z.jsx)(K,{handleLogIn:this.handleLogIn,deliveryAddress:s})}),Object(z.jsx)(O.b,{exact:!0,path:"/abmelden",children:this.handleLogOut}),Object(z.jsx)(O.b,{exact:!0,path:"/",children:Object(z.jsx)(H,{})})]})]})}}]),n}(a.Component));Le.contextType=U;var Ve=Object(O.g)(Le);n(187);i.a.render(Object(z.jsx)(L,{children:Object(z.jsx)(c.a,{children:Object(z.jsx)(Ve,{})})}),document.getElementById("root"))}},[[188,1,2]]]);
//# sourceMappingURL=main.2a0e913d.chunk.js.map